{"version":3,"sources":["firebase/config.tsx","context/AuthContext.tsx","hooks/useAuthContext.tsx","pages/dashboard/ProductFilter.tsx","utilities/stripeClient.ts","utilities/convertValue.ts","components/Image.tsx","components/DefinitionList/ProductList.tsx","components/Loading.tsx","pages/dashboard/Dashboard.tsx","components/Input/InputText.tsx","components/Input/InputNumber.tsx","components/Input/InputTextarea.tsx","components/Button/CloseButton.tsx","components/Button/FlatButton.tsx","components/Modal/ExecuteModal.tsx","components/Input/InputFileMulti.tsx","utilities/converter.ts","hooks/useToken.tsx","hooks/useLogout.tsx","pages/create/CreateFurniture.tsx","pages/login/Login.tsx","hooks/useLogin.tsx","pages/signup/Signup.tsx","hooks/useSignup.tsx","components/Avatar.tsx","components/Modal/FormModal.tsx","hooks/useSubCollection.tsx","assets/icon/icon_person.svg","pages/furniture/FurnitureComment.tsx","hooks/useFirestore.tsx","assets/icon/icon_add_favorite.svg","assets/icon/icon_remove_favorite.svg","hooks/useSubDocument.tsx","components/Button/LikeButton.tsx","components/Modal/PreviewModal.tsx","pages/furniture/FurnitureSummary.tsx","pages/furniture/Furniture.tsx","assets/icon/icon_temple.svg","assets/icon/icon_temple_white.svg","components/HambergerMenu.tsx","components/Navbar.tsx","assets/icon/icon_dashboard.svg","assets/icon/icon_add_circle.svg","assets/icon/icon_feedback.svg","assets/icon/icon_cart.svg","components/Sidebar.tsx","components/OnlineUsers.tsx","hooks/useCollection.tsx","assets/icon/icon_thumb_up.svg","assets/icon/icon_thumb_down.svg","assets/icon/icon_undo.svg","components/ProgressBar.tsx","components/TinderSwipe.tsx","pages/diagnose/Diagnose.tsx","hooks/useRandomDocument.tsx","components/UserNavbar.tsx","assets/icon/icon_not_found.svg","components/NotFound.tsx","pages/user/UserFavorite.tsx","pages/user/UserAccount.tsx","components/DefinitionList/PaymentList.tsx","pages/user/UserHistory.tsx","components/Input/InputCheckbox.tsx","assets/icon/icon_add.svg","assets/icon/icon_remove.svg","components/Counter.tsx","components/Divider.tsx","assets/icon/icon_delete.svg","components/DefinitionList/CartList.tsx","pages/cart/Cart.tsx","hooks/useCartDocument.tsx","pages/cart/Complete.tsx","assets/image/furniture_1.jpg","assets/image/furniture_bed.jpg","assets/image/furniture_blanket.jpg","assets/image/furniture_chair.jpg","assets/image/furniture_lamp.jpg","assets/image/furniture_plant.jpg","assets/image/furniture_rug.jpg","assets/image/furniture_shelf.jpg","assets/image/furniture_sofa.jpg","utilities/dammyData.ts","pages/diagnose/DiagnoseResult.tsx","pages/terms.tsx","pages/privacy.tsx","pages/error.tsx","App.tsx","index.tsx"],"names":["firebaseConfig","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","useFirebaseEmulator","window","location","hostname","firebase","initializeApp","projectFirestore","firestore","projectAuth","auth","projectStorage","storage","projectFunctions","app","functions","timestamp","Timestamp","isEmulating","useEmulator","initState","user","authIsReady","AuthContext","createContext","undefined","authReducer","state","action","type","payload","AuthContextProvider","children","useReducer","dispatch","useEffect","unsub","onAuthStateChanged","Provider","value","useAuthContext","context","useContext","Error","filterList","ProductFilter","currentFilter","changeFilter","className","map","f","onClick","ProductUseCase","a","productQuery","collection","orderBy","get","productSnapshot","Promise","all","docs","doc","priceRef","ref","where","priceSnapshot","priceMap","reduce","acc","v","id","data","productItem","product","prices","comments","productItemRef","productItemSnapshot","commentRef","commentSnapshot","snapshot","commentMap","console","log","uid","paymentsRef","paymentSnapshot","payments","line_items","success_url","cancel_url","resolve","reject","add","mode","onSnapshot","snap","error","sessionId","loadStripe","stripe","redirectToCheckout","productUseCase","convertedPath","path","result","split","document","subCollection","subDocument","taxIncludedPrice","price","taxRate","Math","round","toLocaleString","delay","t","r","setTimeout","scrollTop","scrollingElementTop","scrollingElement","max","scrollY","pageYOffset","body","documentElement","trackWindowScroll","src","scrollPosition","FurnitureList","productItems","item","to","images","length","name","Object","keys","priceIndex","unit_amount","metadata","width","height","Loading","message","styles","top","style","color","Dashboard","useState","setCurrentFilter","isPending","setIsPending","setProductItems","useCookies","cookies","setCookie","fetchProducts","fetchAll","filteredProductItems","filter","category","newFilter","ProductList","InputText","label","setState","required","onChange","e","target","InputNumber","Number","InputTextarea","CloseButton","styleName","FlatButton","content","isDisabled","disabled","ExecuteModal","setToggleModal","overflow","mineType","PhotosUpload","photos","setPhotos","toggleModal","isSameError","setIsSameError","isNumberError","setIsNumberError","isFileTypeError","setIsFileTypeError","resetErrors","handleFile","event","files","values","concat","pickedPhotos","file","includes","some","photo","size","addedPhotos","slice","openModal","Array","_","index","photoIndex","modifyPhotos","handleCancel","URL","createObjectURL","alt","htmlFor","accept","multiple","hidden","collectionPoint","withConverter","toFirestore","fromFirestore","documentPoint","useToken","removeCookie","createJWT","params","axios","post","jwt","verifyJWT","headers","Authorization","removeJWT","useLogout","isCancelled","setIsCancelled","setError","logout","update","online","signOut","categories","CreateProject","history","useHistory","setName","description","setDescription","floor","random","setPrice","setWidth","setLength","setHeight","stock","setStock","setCategory","formError","setFromError","isLoading","setIsLoading","handleSubmit","preventDefault","promises","loadImage","maxWidth","canvas","image","toBlob","blob","uploadPath","put","img","getDownloadURL","imgUrl","newPhotos","furniture","alert","push","onSubmit","InputFileMulti","option","options","Login","email","setEmail","password","setPassword","login","signInWithEmailAndPassword","res","displayName","useLogin","placeholder","Signup","setDisplayName","thumbnail","setThumbnail","thumbnailError","setThumbnailError","signup","createUserWithEmailAndPassword","updateProfile","photoURL","set","useSignup","selected","Avatar","FormModal","referense","newComment","setNewComment","commentToAdd","createdAt","fromDate","Date","closeModal","useSubCollection","documents","setDocuments","setReferense","subCollectionPoint","unsubscribe","results","forEach","ProjectComments","useParams","PersonIcon","comment","formatDistanceToNow","toDate","addSuffix","locale","ja","initialState","success","firestoreReducer","useSubDocument","subDocumentPoint","err","LikeButton","like","setLike","likedUser","likedFurniture","exists","delete","liked_user","liked_furniture","AddFavoriteIcon","RemoveFavoriteIcon","PreviewModal","ProjectSummary","togglePreviewModal","setTogglePreviewModal","toggleExecuteModal","setToggleExecuteModal","response","dispatchIfNotCancelled","addDocument","addedDocument","deleteDocument","updateDocument","updates","updatedDocument","useFirestore","addCart","productId","newArray","openExecuteModal","Project","setProductItem","fetchProductItem","useCallback","FurnitureSummary","FurnitureComment","HamburgerMenu","closeHamburger","WhiteTempleIcon","toggled","toggle","Navbar","isOpen","setIsOpen","Temple","Sidebar","exact","DashboardIcon","AddCircleIcon","FeedbackIcon","CartIcon","OnlineUsers","_query","_orderBy","query","useRef","current","useCollection","ProgressBar","percent","setValue","TinderSwipe","db","lastDirection","setLastDirection","currentIndex","setCurrentIndex","setPercent","currentIndexRef","childRefs","useMemo","fill","i","React","createRef","progressBarCalclation","val","result2","updateCurrentIndex","canGoBack","canSwipe","swipe","direction","goBack","newIndex","restoreCard","character","onSwipe","dir","swiped","onCardLeftScreen","idx","backgroundImage","ThumbDown","Undo","ThumbUp","Diagnose","randomIndex","indexs","randomDocument","queryIndex","String","productsRef","startAt","endAt","handleAsync","useRandomDocument","tabList","UserNavbar","currentTab","setCurrentTab","tab","changeTab","NotFound","NotFoundIcon","UserFavorite","p","getLikedFurnitures","UserAccount","onRequestTest","getAxiosTest","emulatingTest","httpsCallable","helloOnCall","then","PaymentList","paymentItems","payment","items","created","UserHistory","setPayments","fetchPayments","InputCheckbox","text","Counter","count","setCount","isIncrementActive","setIsIncrementActive","isDecrementActive","setIsDecrementActive","decrement","RemoveIcon","increment","AddIcon","Divider","CartList","selectProduct","removeProduct","DeleteIcon","priceId","HandleRemove","Cart","isAccepted","setIsAccepted","isPendingBuy","setIsPendingBuy","setLinetems","fetchProductItemWitoutComment","useCartDocument","onClickBuy","formatlineItems","documentsLineItems","quantity","resultsLineItems","seccess_url","origin","buy","checkSameProduct","lineItem","checkedProduct","Complete","recommendation","baseColor","subColor","imageUrl","theme_1","details","depth","furniture_bed","furniture_chair","furniture_sofa","furniture_lamp","furniture_rug","furniture_blanket","furniture_shelf","furniture_plant","DiagnoseResult","terms","privacy","App","CreateFurniture","Furniture","ReactDOM","CookiesProvider","getElementById"],"mappings":"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","file":"static/js/main.15066183.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\nimport \"firebase/firestore\";\nimport \"firebase/auth\";\nimport \"firebase/storage\";\nimport \"firebase/functions\";\n\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_API_KEY,\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\n  projectId: process.env.REACT_APP_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\n  appId: process.env.REACT_APP_APP_ID,\n  useFirebaseEmulator: window.location.hostname === \"localhost\",\n};\n\n// init firebase\nfirebase.initializeApp(firebaseConfig);\n\n// init service\nconst projectFirestore = firebase.firestore();\nconst projectAuth = firebase.auth();\nconst projectStorage = firebase.storage();\nconst projectFunctions = firebase.app().functions();\n\n//timestamp\nconst timestamp = firebase.firestore.Timestamp;\n\n// functions側でfirebase emulator:startするなら意味がない？\nconst isEmulating = firebaseConfig.useFirebaseEmulator;\nif (isEmulating) {\n  firebase.functions().useEmulator(\"localhost\", 5001);\n}\n\nexport {\n  firebase,\n  projectFirestore,\n  projectAuth,\n  projectStorage,\n  projectFunctions,\n  timestamp,\n  isEmulating,\n};\n","import React, { createContext, useReducer, useEffect, FC } from \"react\";\nimport { firebase, projectAuth } from \"../firebase/config\";\n\ntype Action = {\n  type: string;\n  payload: firebase.User | null;\n};\n\ntype State = {\n  user: firebase.User | null;\n  authIsReady?: boolean;\n};\n\n// authIsReadyはdispatchでのみトグルしている\ninterface ContextInterface {\n  dispatch: React.Dispatch<Action>; // dispatch: (value: Action) => void;\n  user: firebase.User | null;\n  authIsReady?: boolean;\n}\n\nconst initState: State = {\n  user: null,\n  authIsReady: false,\n};\n\nexport const AuthContext = createContext<ContextInterface | undefined>(\n  undefined\n);\n// 初期値undefinedだがuseAuthContextで型ガードしている\n\nexport const authReducer: React.Reducer<State, Action> = (state, action) => {\n  switch (action.type) {\n    case \"LOGIN\":\n      return { ...state, user: action.payload };\n    case \"LOGOUT\":\n      return { ...state, user: null };\n    case \"AUTH_IS_READY\":\n      return { user: action.payload, authIsReady: true };\n    default:\n      return state;\n  }\n};\n\nexport const AuthContextProvider: FC = ({ children }) => {\n  const [state, dispatch] = useReducer(authReducer, initState);\n\n  useEffect(() => {\n    const unsub = projectAuth.onAuthStateChanged((user) => {\n      if (!user) return;\n      dispatch({\n        type: \"AUTH_IS_READY\",\n        payload: user,\n      });\n      unsub();\n    });\n  }, []);\n\n  return (\n    <AuthContext.Provider value={{ ...state, dispatch }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n","import { AuthContext } from \"../context/AuthContext\";\nimport { useContext } from \"react\";\n\nexport const useAuthContext = () => {\n  const context = useContext(AuthContext);\n\n  if (!context) {\n    throw Error(\"useAuthContext must be used inside an AuthContextProvider\");\n  }\n\n  return context;\n};\n","import { FC } from \"react\";\nconst filterList: Array<string> = [\n  \"all\",\n  \"bed\",\n  \"blanket\",\n  \"chair\",\n  \"lamp\",\n  \"plant\",\n  \"rug\",\n  \"table\",\n  \"shelf\",\n  \"sofa\",\n  \"development\",\n  \"sales\",\n  \"design\",\n  \"marketing\",\n];\n\ntype Props = {\n  currentFilter: String;\n  changeFilter: Function;\n};\n\nconst ProductFilter: FC<Props> = ({ currentFilter, changeFilter }) => {\n  const handleClick = (newFilter: String) => {\n    changeFilter(newFilter);\n  };\n  return (\n    <div className=\"product-filter-container\">\n      <nav>\n        <p className=\"title\">FILTER BY</p>\n        {filterList.map((f) => (\n          <button\n            key={f}\n            onClick={() => handleClick(f)}\n            className={currentFilter === f ? \"active\" : \"\"}\n          >\n            {f}\n          </button>\n        ))}\n      </nav>\n    </div>\n  );\n};\n\nexport default ProductFilter;\n","import { loadStripe } from \"@stripe/stripe-js\";\nimport {\n  CheckoutSessionDoc,\n  PriceDoc,\n  ProductDoc,\n  SubscriptionDoc,\n} from \"../@types/stripe\";\nimport { projectFirestore } from \"../firebase/config\";\nimport { Comment } from \"../@types/dashboard\";\n\nexport type ProductItem = {\n  product: ProductDoc;\n  prices: { [key: string]: PriceDoc };\n  comments: Array<Comment>;\n};\n\nexport type ProductItemWithoutComment = Pick<ProductItem, \"product\" | \"prices\">;\n\nexport type SubscriptionItem = {\n  subscription: SubscriptionDoc;\n  product: ProductDoc;\n  price: PriceDoc;\n};\n\nexport type line_item = {\n  price: string;\n  quantity: number;\n};\n\nclass ProductUseCase {\n  /**\n   * 参照①\n   */\n  async fetchAll(): Promise<ProductItem[]> {\n    const productQuery = projectFirestore\n      .collection(\"products\")\n      .orderBy(\"metadata.createdAt\", \"desc\");\n\n    const productSnapshot = await productQuery.get();\n    return await Promise.all(\n      productSnapshot.docs.map(async (doc) => {\n        const priceRef = doc.ref.collection(\"prices\");\n        const priceSnapshot = await priceRef.where(\"active\", \"==\", true).get();\n        const priceMap = priceSnapshot.docs.reduce((acc, v) => {\n          // @ts-ignore\n          acc[v.id] = v.data() as PriceDoc;\n          return acc;\n        }, {});\n        const productItem: ProductItem = {\n          product: {\n            id: doc.id,\n            ...doc.data(),\n          } as ProductDoc,\n          prices: priceMap,\n          comments: [], // FIXME:PickでCommentを省く\n        };\n\n        return productItem;\n      })\n    );\n  }\n  /**\n   * 参照②\n   */\n  async fetchProductItem(id: string): Promise<ProductItem> {\n    const productItemRef = projectFirestore.collection(\"products\").doc(id);\n    const productItemSnapshot = await productItemRef.get();\n    const priceRef = await productItemSnapshot.ref.collection(\"prices\");\n    const priceSnapshot = await priceRef.where(\"active\", \"==\", true).get();\n    const priceMap = await priceSnapshot.docs.reduce((acc, v) => {\n      // @ts-ignore\n      acc[v.id] = v.data() as PriceDoc;\n      return acc;\n    }, {});\n\n    const commentRef = await productItemSnapshot.ref.collection(\"comments\");\n    const commentSnapshot = await commentRef.get();\n\n    const commentMap = await commentSnapshot.docs.map((snapshot) => {\n      return snapshot.data();\n    });\n    console.log(commentMap, \"commentMap\");\n    const productItem: ProductItem = {\n      product: {\n        id: productItemSnapshot.id,\n        ...productItemSnapshot.data(),\n      } as ProductDoc,\n      prices: priceMap,\n      comments: commentMap as Array<Comment>,\n    };\n    return productItem;\n  }\n  /**\n   * 参照③\n   */\n  async fetchProductItemWitoutComment(\n    id: string\n  ): Promise<ProductItemWithoutComment> {\n    const productItemRef = projectFirestore.collection(\"products\").doc(id);\n    const productItemSnapshot = await productItemRef.get();\n    const priceRef = await productItemSnapshot.ref.collection(\"prices\");\n    const priceSnapshot = await priceRef.get();\n    const priceMap = await priceSnapshot.docs.reduce((acc, v) => {\n      // @ts-ignore\n      acc[v.id] = v.data() as PriceDoc;\n      return acc;\n    }, {});\n\n    const productItem: ProductItemWithoutComment = {\n      product: {\n        id: productItemSnapshot.id,\n        ...productItemSnapshot.data(),\n      } as ProductDoc,\n      prices: priceMap,\n    };\n    return productItem;\n  }\n  /**\n   * 参照④\n   */\n  async fetchPayments(uid: string): Promise<any> {\n    const paymentsRef = await projectFirestore\n      .collection(\"customers\")\n      .doc(uid)\n      .collection(\"payments\")\n      .where(\"status\", \"==\", \"succeeded\");\n    const paymentSnapshot = await paymentsRef.get();\n    const payments = await paymentSnapshot.docs.map((doc) => {\n      return {\n        id: doc.id,\n        ...doc.data(),\n      };\n    });\n    return payments;\n  }\n  /**\n   * 更新①\n   */\n  // NOTE:購入後にメールを送る\n  // NOTE:stockの項目を作り0になったらsctive:falseにして購入不可にする\n  async buy(\n    uid: string,\n    line_items: Array<line_item>,\n    success_url: string,\n    cancel_url: string\n  ) {\n    return new Promise(async (resolve, reject) => {\n      const docRef = await projectFirestore\n        .collection(\"customers\")\n        .doc(uid)\n        .collection(\"checkout_sessions\")\n        .add({\n          mode: \"payment\",\n          line_items, // 複数購入に対応\n          success_url,\n          cancel_url,\n        });\n\n      docRef.onSnapshot(async (snap) => {\n        const { error, sessionId } = (await snap.data()) as CheckoutSessionDoc;\n        if (error) return reject(error);\n        if (!!sessionId) {\n          const stripe = await loadStripe(\n            process.env.REACT_APP_STRIPE_API_KEY || \"\"\n          );\n          if (!stripe) return reject();\n          stripe.redirectToCheckout({ sessionId });\n          return resolve(undefined);\n        }\n      });\n    });\n  }\n}\n\nexport const productUseCase = new ProductUseCase();\n","import { firebasePath } from \"../@types/dashboard\";\n\nexport const convertedPath = (path: string): firebasePath => {\n  const result = path.split(\"/\");\n  return {\n    collection: result[1] ?? \"\",\n    document: result[2] ?? \"\",\n    subCollection: result[3] ?? \"\",\n    subDocument: result[4] ?? \"\",\n  };\n};\n\nexport const taxIncludedPrice = (price: number, taxRate?: number): string => {\n  const useTaxRate = 1.1;\n  taxRate = useTaxRate;\n  return `¥${Math.round(price * (1 + taxRate / 100)).toLocaleString()}`;\n};\n\nexport const delay = (t: number) => new Promise((r) => setTimeout(r, t));\n\nexport const scrollTop = (): number => {\n  let scrollingElementTop: number = 0;\n\n  if (document.scrollingElement) {\n    scrollingElementTop = document.scrollingElement.scrollTop;\n  }\n\n  return Math.max(\n    window.scrollY,\n    window.pageYOffset,\n    document.body.scrollTop,\n    document.documentElement.scrollTop,\n    scrollingElementTop\n  );\n};\n","import { FC } from \"react\";\nimport {\n  ScrollPosition,\n  LazyLoadImage,\n  trackWindowScroll,\n} from \"react-lazy-load-image-component\";\nimport \"react-lazy-load-image-component/src/effects/blur.css\";\n\ntype Prop = {\n  src: string;\n  scrollPosition: ScrollPosition;\n};\n\nconst Image: FC<Prop> = ({ src, scrollPosition }) => {\n  return (\n    <LazyLoadImage\n      src={src}\n      className=\"image\"\n      scrollPosition={scrollPosition}\n    />\n  );\n};\nexport default trackWindowScroll(Image);\n","import { Link } from \"react-router-dom\";\nimport { FC } from \"react\";\nimport {\n  ProductItem,\n  ProductItemWithoutComment,\n} from \"../../utilities/stripeClient\";\nimport { useAuthContext } from \"../../hooks/useAuthContext\";\nimport { taxIncludedPrice } from \"../../utilities/convertValue\";\nimport Image from \"../Image\";\n\ntype Props = {\n  productItems: Array<ProductItem | ProductItemWithoutComment>;\n};\n\nconst FurnitureList: FC<Props> = ({ productItems }) => {\n  const { user } = useAuthContext();\n  // nullチェック・通常のreturnだとエラーになる\n  if (!user) throw new Error(\"we cant find your account\");\n\n  return (\n    <div className=\"product-list\">\n      {productItems &&\n        productItems.map((item: ProductItem | ProductItemWithoutComment) => (\n          <Link\n            to={`/furnitures/${item.product.id}`}\n            key={item.product.id}\n            className=\"wrapper\"\n          >\n            <div className=\"thumbnail\">\n              {item.product.images.length > 0 ? (\n                <Image src={item.product.images[0]} />\n              ) : (\n                <Image src=\"https://placehold.jp/230x160.png\" />\n              )}\n            </div>\n            <div className=\"content\">\n              <h4 className=\"name\">{item.product.name}</h4>\n              {Object.keys(item.prices).map((priceIndex) => (\n                <p key={priceIndex} className=\"price\">\n                  {taxIncludedPrice(item.prices[priceIndex].unit_amount)}\n                </p>\n              ))}\n              <div className=\"dimentions\">\n                <ul>\n                  <li>幅 {item.product.metadata?.width ?? 111}cm</li>\n                  <li>深さ {item.product.metadata?.length ?? 222}cm</li>\n                  <li>高さ {item.product.metadata?.height ?? 333}cm</li>\n                </ul>\n              </div>\n            </div>\n          </Link>\n        ))}\n    </div>\n  );\n};\nexport default FurnitureList;\n","import { FC } from \"react\";\nimport Loader from \"react-loader-spinner\";\ntype Props = {\n  message?: string;\n};\n\nconst Loading: FC<Props> = ({ message }: Props) => {\n  const scrollTop = (): number => {\n    return Math.max(\n      window.pageYOffset,\n      document.documentElement.scrollTop,\n      document.body.scrollTop\n    );\n  };\n  const styles = { top: scrollTop() };\n\n  return (\n    <>\n      <div className=\"overlay\" style={styles}>\n        <div className=\"wrapper\">\n          <Loader\n            type=\"RevolvingDot\"\n            color=\"#84bcb4\"\n            height={100}\n            width={100}\n          />\n          {message ? (\n            <div className=\"message\">\n              <span className=\"animation type1\">L</span>\n              <span className=\"animation type2\">o</span>\n              <span className=\"animation type3\">a</span>\n              <span className=\"animation type4\">d</span>\n              <span className=\"animation type5\">i</span>\n              <span className=\"animation type6\">n</span>\n              <span className=\"animation type7\">g</span>\n              <span className=\"animation type8\">.</span>\n              <span className=\"animation type9\">.</span>\n              <span className=\"animation type10\">.</span>\n            </div>\n          ) : (\n            <div className=\"message\">{message}</div>\n          )}\n        </div>\n      </div>\n    </>\n  );\n};\nexport default Loading;\n","import { FC, useEffect } from \"react\";\nimport ProductFilter from \"./ProductFilter\";\nimport { useState } from \"react\";\nimport { useAuthContext } from \"../../hooks/useAuthContext\";\nimport { productUseCase, ProductItem } from \"../../utilities/stripeClient\";\nimport ProductList from \"../../components/DefinitionList/ProductList\";\nimport Loading from \"../../components/Loading\";\nimport { useCookies } from \"react-cookie\";\n\nconst Dashboard: FC = () => {\n  const { user } = useAuthContext();\n  const [currentFilter, setCurrentFilter] = useState<String>(\"all\");\n  const [isPending, setIsPending] = useState<boolean>(false);\n  const [productItems, setProductItems] = useState<ProductItem[]>([]);\n  const [cookies, setCookie] = useCookies([\"random\"]);\n  console.log(cookies);\n  //cookieのレンダリングが激しいのでチェックoptionのpathが怪しい。もしくはuseRefに入れる\n\n  const changeFilter = (newFilter: String) => {\n    setCurrentFilter(newFilter);\n  };\n\n  const fetchProducts = async () => {\n    try {\n      setIsPending(true);\n      const productItems = await productUseCase.fetchAll();\n      setProductItems(productItems);\n    } finally {\n      setIsPending(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchProducts();\n    setCookie(\"random\", productItems.length, { path: \"/\" });\n  }, [setCookie, productItems.length]);\n\n  // nullチェック・通常のreturnだとエラーになる\n  if (!user) throw new Error(\"we cant find your account\");\n\n  const filteredProductItems = productItems\n    ? // eslint-disable-next-line\n      productItems.filter((productItem: ProductItem) => {\n        switch (currentFilter) {\n          case \"all\":\n            return true;\n          case \"bed\":\n          case \"blanket\":\n          case \"chair\":\n          case \"lamp\":\n          case \"plant\":\n          case \"rug\":\n          case \"table\":\n          case \"shelf\":\n          case \"sofa\":\n          case \"development\":\n          case \"sales\":\n          case \"design\":\n          case \"marketing\":\n            return productItem.product.metadata?.category === currentFilter;\n          default:\n            return true;\n        }\n      })\n    : null;\n\n  return (\n    <div className=\"common-container\">\n      {isPending && <Loading />}\n      {filteredProductItems && (\n        <ProductFilter\n          currentFilter={currentFilter}\n          changeFilter={changeFilter}\n        />\n      )}\n      {filteredProductItems && (\n        <ProductList productItems={filteredProductItems} />\n      )}\n    </div>\n  );\n};\n\nexport default Dashboard;\n","import { FC } from \"react\";\n\ninterface Props {\n  label: string;\n  state: string;\n  setState: React.Dispatch<React.SetStateAction<string>>;\n}\n\nconst InputText: FC<Props> = ({ label, state, setState }) => {\n  return (\n    <>\n      <label>\n        <span>{label}</span>\n        <input\n          required\n          type=\"text\"\n          onChange={(e) => setState(e.target.value)}\n          value={state}\n        />\n      </label>\n    </>\n  );\n};\n\nexport default InputText;\n","import { FC } from \"react\";\n\ninterface Props {\n  label: string;\n  state: number;\n  setState: React.Dispatch<React.SetStateAction<number>>;\n}\n\nconst InputNumber: FC<Props> = ({ label, state, setState }) => {\n  return (\n    <>\n      <label>\n        <span>{label}</span>\n        <input\n          required\n          type=\"number\"\n          onChange={(e) => setState(Number(e.target.value))}\n          value={state}\n        />\n      </label>\n    </>\n  );\n};\n\nexport default InputNumber;\n","import { FC } from \"react\";\n\ninterface Props {\n  label: string;\n  state: string;\n  setState: React.Dispatch<React.SetStateAction<string>>;\n}\n\nconst InputTextarea: FC<Props> = ({ label, state, setState }) => {\n  return (\n    <>\n      <label>\n        <span>{label}</span>\n        <textarea\n          required\n          onChange={(e) => setState(e.target.value)}\n          value={state}\n        />\n      </label>\n    </>\n  );\n};\n\nexport default InputTextarea;\n","import { FC } from \"react\";\ntype Props = {\n  styleName: string;\n  onClick?: (event: React.MouseEvent<HTMLButtonElement>) => void;\n};\n\nconst CloseButton: FC<Props> = ({ styleName, onClick }: Props) => {\n  return (\n    <button className={styleName} onClick={onClick}>\n      &times;\n    </button>\n  );\n};\nexport default CloseButton;\n","import { FC } from \"react\";\ntype Props = {\n  content: string;\n  styleName?: string;\n  isDisabled?: boolean;\n  onClick?: (event: React.MouseEvent<HTMLButtonElement>) => void;\n};\n\nconst FlatButton: FC<Props> = ({\n  styleName,\n  content,\n  isDisabled,\n  onClick,\n}: Props) => {\n  return (\n    <button\n      className={styleName + ` btn -mt10`}\n      onClick={onClick}\n      disabled={isDisabled}\n    >\n      {content}\n    </button>\n  );\n};\nexport default FlatButton;\n","import { FC } from \"react\";\nimport { useAuthContext } from \"../../hooks/useAuthContext\";\nimport FlatButton from \"../Button/FlatButton\";\nimport { scrollTop } from \"../../utilities/convertValue\";\n\ntype Props = {\n  message: string;\n  onClick: (event: React.MouseEvent<HTMLButtonElement>) => void;\n  setToggleModal: React.Dispatch<React.SetStateAction<boolean>>;\n};\n\nconst ExecuteModal: FC<Props> = ({ message, onClick, setToggleModal }) => {\n  const { user } = useAuthContext();\n  if (!user) throw new Error(\"we cant find your account\");\n\n  const closeModal = () => {\n    setToggleModal(false);\n    document.body.style.overflow = \"\";\n  };\n\n  const styles = { top: scrollTop() };\n\n  return (\n    <div className=\"execute-modal\">\n      <div className=\"overlay\" style={styles}>\n        <div className=\"wrapper -form\">\n          <p className=\"message\">{message}</p>\n          <div className=\"buttons\">\n            <FlatButton\n              styleName=\"-w200 -round -mt50\"\n              content=\"はい\"\n              onClick={onClick}\n            />\n            <FlatButton\n              styleName=\"-w200 -round -mt50\"\n              content=\"いいえ\"\n              onClick={closeModal}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ExecuteModal;\n","import React, { FC, useState } from \"react\";\nimport CloseButton from \"../Button/CloseButton\";\nimport ExecuteModal from \"../Modal/ExecuteModal\";\n\ninterface Props {\n  name: string; // NOTE:input[\"file\"]とlabelをリンクさせるためのフラグ\n  photos: File[];\n  setPhotos: (files: File[]) => void;\n}\n\nconst mineType = [\n  \"image/gif\",\n  \"image/jpeg\",\n  \"image/png\",\n  \"image/bmp\",\n  \"image/svg+xml\",\n];\n\nconst PhotosUpload: FC<Props> = ({\n  name,\n  photos,\n  setPhotos,\n}): React.ReactElement => {\n  const [toggleModal, setToggleModal] = useState(false);\n  const [isSameError, setIsSameError] = useState(false);\n  const [isNumberError, setIsNumberError] = useState(false);\n  const [isFileTypeError, setIsFileTypeError] = useState(false);\n\n  const resetErrors = () => {\n    setIsSameError(false);\n    setIsNumberError(false);\n    setIsFileTypeError(false);\n  };\n\n  const handleFile = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    if (event.target.files === null || event.target.files.length === 0) {\n      return;\n    }\n    const files = Object.values(event.target.files).concat();\n    // 初期化することで同じファイルを連続で選択してもonChagngeが発動するように設定し、画像をキャンセルしてすぐに同じ画像を選ぶ動作に対応\n    event.target.value = \"\";\n    resetErrors();\n\n    // NOTE:filterを通さずに行うとpromiseが帰ってしまう\n    const pickedPhotos = files.filter(async (file) => {\n      // first validation\n      if (!mineType.includes(file.type)) {\n        setIsFileTypeError(true);\n        return false;\n      }\n      // second validation\n      const existsSameSize = photos.some((photo) => photo.size === file.size);\n      if (existsSameSize) {\n        setIsSameError(true);\n        return false;\n      }\n      return true;\n    });\n\n    if (pickedPhotos.length === 0) {\n      return;\n    }\n    const addedPhotos = [...photos, ...pickedPhotos];\n    if (addedPhotos.length >= 4) {\n      setIsNumberError(true);\n    }\n    //無限に追加することができるがsliceで強制的に3枚にする\n    setPhotos(addedPhotos.slice(0, 3));\n  };\n\n  const handleCancel = (photoIndex: number) => {\n    document.body.style.overflow = \"\";\n    resetErrors();\n    const modifyPhotos = photos.filter((photo, index) => photoIndex !== index);\n    setPhotos(modifyPhotos);\n    setToggleModal(false);\n  };\n  const openModal = () => {\n    setToggleModal(true);\n    document.body.style.overflow = \"hidden\";\n  };\n\n  return (\n    <>\n      <div className=\"photos-container\">\n        {[...Array(3)].map((_: number, index: number) =>\n          index < photos.length ? (\n            <div>\n              <CloseButton styleName=\"close-upload\" onClick={openModal} />\n              <div className=\"wrapper\" key={index}>\n                {toggleModal && (\n                  <ExecuteModal\n                    message=\"本当に削除しますか？\"\n                    setToggleModal={setToggleModal}\n                    onClick={() => handleCancel(index)}\n                  />\n                )}\n                {/* 速度改善でfileを直接入れ込む必要あり */}\n                <img\n                  src={URL.createObjectURL(photos[index])}\n                  alt={`あなたの写真 ${index + 1}`}\n                  width=\"200\"\n                  className=\"image\"\n                />\n              </div>\n            </div>\n          ) : (\n            <div>\n              <CloseButton\n                styleName=\"close-upload -disable\"\n                onClick={openModal}\n              />\n              <label className=\"wrapper\" htmlFor={name} key={index}>\n                <img\n                  src=\"https://placehold.jp/200x200.png\"\n                  alt=\"\"\n                  className=\"image\"\n                />\n              </label>\n            </div>\n          )\n        )}\n      </div>\n      {isSameError && <p>※既に選択された画像と同じものは表示されません</p>}\n      {isNumberError && <p>※3枚を超えて選択された画像は表示されません</p>}\n      {isFileTypeError && (\n        <p>※jpeg, png, bmp, gif, svg以外のファイル形式は表示されません</p>\n      )}\n\n      <label className=\"btn -upload\" htmlFor={name}>\n        upload\n      </label>\n\n      <input\n        data-cy=\"file_upload\"\n        type=\"file\"\n        name={name}\n        id={name}\n        accept=\"image/*\"\n        onChange={handleFile}\n        multiple\n        hidden\n      />\n    </>\n  );\n};\n\nexport default PhotosUpload;\n","import { firebase, projectFirestore } from \"../firebase/config\";\nimport { User, ProjectType } from \"../@types/dashboard\";\n\nconst converter = <T>() => ({\n  // NOTE:toFirestore: (data: Partial<T>) => data,で曖昧にすることもできる\n  toFirestore: (data: T) => data,\n  fromFirestore: (snap: firebase.firestore.QueryDocumentSnapshot) =>\n    snap.data() as T,\n});\n\nconst collectionPoint = <T>(collection: string) =>\n  projectFirestore.collection(collection).withConverter(converter<T>());\n\nconst documentPoint = <T>(collection: string, document: string) =>\n  projectFirestore\n    .collection(collection)\n    .withConverter(converter<T>())\n    .doc(document);\n\nconst subCollectionPoint = <T, U>(\n  collection: string,\n  document: string,\n  subCollection: string\n) =>\n  projectFirestore\n    .collection(collection)\n    .withConverter(converter<T>())\n    .doc(document)\n    .collection(subCollection)\n    .withConverter(converter<U>());\n\nconst subDocumentPoint = <T, U>(\n  collection: string,\n  document: string,\n  subCollection: string,\n  subDocument: string\n) =>\n  projectFirestore\n    .collection(collection)\n    .withConverter(converter<T>())\n    .doc(document)\n    .collection(subCollection)\n    .withConverter(converter<U>())\n    .doc(subDocument);\n\nconst db = {\n  users: collectionPoint<User>(\"users\"),\n  projects: collectionPoint<ProjectType>(\"projects\"),\n};\n\nexport {\n  collectionPoint,\n  documentPoint,\n  subCollectionPoint,\n  subDocumentPoint,\n  db,\n};\n","import { useCookies } from \"react-cookie\";\nimport axios from \"axios\";\n\ntype Response = {\n  message: string;\n  jwt: string;\n};\n\ntype Params = {\n  uid: string;\n  name: string;\n};\n\nexport const useToken = () => {\n  const [cookies, setCookie, removeCookie] = useCookies([\"jwt\"]);\n\n  const createJWT = async (params: Params) => {\n    const result = await axios.post<Response>(\n      `${process.env.REACT_APP_BASE_URL}/api/jwt`,\n      params\n    );\n    console.log(result, \"createJWT\");\n    setCookie(\"jwt\", result.data.jwt, { path: \"/\" });\n  };\n\n  const verifyJWT = async (): Promise<string> => {\n    try {\n      const headers = {\n        Authorization: `Bearer ${cookies.jwt}`,\n      };\n      const result = await axios.get(\n        `${process.env.REACT_APP_BASE_URL}/api/jwt/check`,\n        { headers }\n      );\n      return result.data.message; // Promise.resolveを返す\n    } catch (error) {\n      throw new Error(\"トークンが有効期限切れです。再ログインしてください。\"); // Promise.rejectを返す\n    }\n  };\n\n  const removeJWT =  () => {\n    removeCookie(\"jwt\", { path: \"/\" });\n  };\n\n  return { verifyJWT, createJWT, removeJWT };\n};\n","import { useEffect, useState } from \"react\";\nimport { projectAuth } from \"../firebase/config\";\nimport { useAuthContext } from \"./useAuthContext\";\nimport { documentPoint } from \"../utilities/converter\";\nimport { User } from \"../@types/dashboard\";\nimport { useToken } from \"../hooks/useToken\";\n\nexport const useLogout = () => {\n  const [isCancelled, setIsCancelled] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [isPending, setIsPending] = useState(false);\n  const { dispatch, user } = useAuthContext();\n  const { removeJWT } = useToken();\n\n  const logout = async () => {\n    setError(null);\n    setIsPending(true);\n\n    try {\n      // update online status\n      if (!user) throw new Error(\"we cant find your account\");\n      type addUser = Omit<User, \"id\">;\n      // FIXME:関係ないプロパティも追加・更新できてしまう\n      await documentPoint<addUser>(\"users\", user.uid).update({\n        online: false,\n      });\n\n      // sign the user out\n      await projectAuth.signOut();\n\n      // remove jwt in cookie\n      removeJWT();\n\n      // dispatch logout action\n      dispatch({ type: \"LOGOUT\", payload: user });\n\n      // update state\n      if (!isCancelled) {\n        setIsPending(false);\n        setError(null);\n      }\n    } catch (err) {\n      if (!isCancelled) {\n        if (err instanceof Error) {\n          setError(err.message);\n        }\n        setIsPending(false);\n      }\n    }\n  };\n\n  useEffect(() => {\n    return () => setIsCancelled(true);\n  }, []);\n\n  return { logout, error, isPending };\n};\n","import { FC, useState, FormEvent } from \"react\";\nimport Select from \"react-select\";\nimport { projectStorage } from \"../../firebase/config\";\nimport { useHistory } from \"react-router-dom\";\nimport { useAuthContext } from \"../../hooks/useAuthContext\";\nimport Loading from \"../../components/Loading\";\nimport InputText from \"../../components/Input/InputText\";\nimport InputNumber from \"../../components/Input/InputNumber\";\nimport InputTextarea from \"../../components/Input/InputTextarea\";\nimport InputFileMulti from \"../../components/Input/InputFileMulti\";\nimport axios from \"axios\";\nimport { useCookies } from \"react-cookie\";\nimport { useLogout } from \"../../hooks/useLogout\";\nimport loadImage from \"blueimp-load-image\";\n\nconst categories = [\n  { value: \"bed\", label: \"Bed\" },\n  { value: \"blanket\", label: \"Blanket\" },\n  { value: \"chair\", label: \"Chair\" },\n  { value: \"lamp\", label: \"Lamp\" },\n  { value: \"plant\", label: \"Plant\" },\n  { value: \"rug\", label: \"Rug\" },\n  { value: \"table\", label: \"Table\" },\n  { value: \"shelf\", label: \"Shelf\" },\n  { value: \"sofa\", label: \"Sofa\" },\n  { value: \"development\", label: \"Development\" },\n  { value: \"design\", label: \"Design\" },\n  { value: \"sales\", label: \"Sales\" },\n  { value: \"marketing\", label: \"Marketing\" },\n];\n\ntype CategoryOp = {\n  value: string;\n};\n\nconst CreateProject: FC = () => {\n  const history = useHistory();\n  const { logout } = useLogout();\n\n  const [name, setName] = useState<string>(\"\");\n  const [photos, setPhotos] = useState<File[]>([]);\n  const [description, setDescription] = useState<string>(\n    \"Lorem ipsum dolor sit amet, consectetur adipisci elit, sed eiusmod tempor incidunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur. Quis aute iure reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint obcaecat cupiditat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\"\n  );\n  const [price, setPrice] = useState<number>(Math.floor(Math.random() * 3000));\n  const [width, setWidth] = useState<number>(Math.floor(Math.random() * 100));\n  const [length, setLength] = useState<number>(Math.floor(Math.random() * 200));\n  const [height, setHeight] = useState<number>(Math.floor(Math.random() * 300));\n  const [stock, setStock] = useState<number>(Math.floor(Math.random() * 10));\n  const [category, setCategory] = useState<CategoryOp | null>(null);\n  const [formError, setFromError] = useState<string | null>(null);\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n  const [cookies] = useCookies([\"random\", \"jwt\"]);\n\n  const { user } = useAuthContext();\n\n  if (!user) {\n    throw new Error(\"Could not complete signup\");\n  }\n\n  const handleSubmit = async (e: FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n    setFromError(null);\n    if (!category) {\n      setFromError(\"Please select a furniture category\");\n      return;\n    }\n\n    /**\n     * base64のdataURLを返す関数\n     */\n\n    // const promises = photos.map(\n    //   async (file): Promise<string | ArrayBuffer | null> => {\n    //     return new Promise((resolve, reject) => {\n    //       const reader = new FileReader();\n    //       reader.onload = () => resolve(reader.result);\n    //       reader.onerror = (error) => reject(error);\n    //       reader.readAsDataURL(file);\n    //     });\n    //   }\n    // );\n\n    /**\n     * データを圧縮する画像を返す\n     */\n\n    const promises = photos.map(\n      async (file): Promise<any> => {\n        const data = await loadImage(file, {\n          maxWidth: 500,\n          canvas: true,\n        });\n        return new Promise((resolve, reject) => {\n          (data.image as HTMLCanvasElement).toBlob(\n            async (blob) => {\n              if (!blob) return reject(\"error\");\n              const uploadPath = `photos/${user.uid}/${file.name}`;\n              const img = await projectStorage.ref(uploadPath).put(blob);\n              const imgUrl = await img.ref.getDownloadURL();\n              resolve(imgUrl);\n            },\n            file.type,\n            0.7\n          );\n        });\n      }\n    );\n\n    const newPhotos = await Promise.all(promises);\n\n    const furniture = {\n      name,\n      photos: newPhotos,\n      description,\n      price,\n      stock,\n      width,\n      length,\n      height,\n      random: cookies.random,\n      category: category.value,\n    };\n\n    try {\n      const headers = {\n        Authorization: `Bearer ${cookies.jwt}`,\n      };\n      const result = await axios.post(\n        `${process.env.REACT_APP_BASE_URL}/api/stripe-post`,\n        furniture,\n        { headers }\n      );\n      console.log(result);\n    } catch (error) {\n      alert(\"Error on CreateFurniture\");\n      logout();\n      history.push(\"/login\");\n    } finally {\n      setIsLoading(false);\n      history.push(\"/\");\n    }\n  };\n  return (\n    <div className=\"common-container\">\n      {isLoading && <Loading />}\n      <div className=\"create-form\">\n        <form onSubmit={handleSubmit}>\n          <InputFileMulti name=\"photos\" photos={photos} setPhotos={setPhotos} />\n          <InputText label=\"name\" state={name} setState={setName} />\n          <InputTextarea\n            label=\"description\"\n            state={description}\n            setState={setDescription}\n          />\n          <InputNumber label=\"price\" state={price} setState={setPrice} />\n          <InputNumber label=\"strock\" state={stock} setState={setStock} />\n          <InputNumber label=\"width\" state={width} setState={setWidth} />\n          <InputNumber label=\"length\" state={length} setState={setLength} />\n          <InputNumber label=\"height\" state={height} setState={setHeight} />\n          <label>\n            <span>Category</span>\n            <Select\n              onChange={(option) => setCategory(option)}\n              options={categories}\n            />\n          </label>\n          <button className=\"btn\">Add Funiture</button>\n          {formError && <p className=\"error\">{formError}</p>}\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default CreateProject;\n","import { FC, FormEvent } from \"react\";\nimport { useState } from \"react\";\nimport { useLogin } from \"../../hooks/useLogin\";\nimport { Link } from \"react-router-dom\";\n\nconst Login: FC = () => {\n  const [email, setEmail] = useState<string>(\"\");\n  const [password, setPassword] = useState<string>(\"\");\n  const { login, error, isPending } = useLogin();\n\n  const handleSubmit = (e: FormEvent) => {\n    e.preventDefault();\n    login(email, password);\n  };\n\n  return (\n    <div className=\"auth-container\">\n      <div className=\"wrapper -w25\">\n        <div className=\"form\" data-cy=\"login\">\n          <h1>login</h1>\n          <form onSubmit={handleSubmit}>\n            <input\n              required\n              type=\"email\"\n              onChange={(e) => setEmail(e.target.value)}\n              value={email}\n              placeholder=\"xyz@gmail.com\"\n              data-cy=\"email\"\n            />\n            <input\n              required\n              type=\"password\"\n              onChange={(e) => setPassword(e.target.value)}\n              value={password}\n              placeholder=\"Must have atleast 6 characters\"\n              data-cy=\"password\"\n            />\n\n            {!isPending && (\n              <button type=\"submit\" data-cy=\"login\">\n                Login\n              </button>\n            )}\n            {isPending && (\n              <button type=\"submit\" disabled>\n                Loading\n              </button>\n            )}\n            {error && <div className=\"error\">{error}</div>}\n            <div className=\"forgot-signup\">\n              <Link to=\"/signup\">Forgot password?</Link>\n              <Link to=\"/signup\">Sign Up</Link>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n","import { useState, useEffect } from \"react\";\nimport { projectAuth } from \"../firebase/config\";\nimport { useAuthContext } from \"./useAuthContext\";\nimport { documentPoint } from \"../utilities/converter\";\nimport { User } from \"../@types/dashboard\";\nimport { useToken } from \"../hooks/useToken\";\n\nexport const useLogin = () => {\n  const [isCancelled, setIsCancelled] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [isPending, setIsPending] = useState(false);\n  const { dispatch } = useAuthContext();\n  const { createJWT } = useToken();\n\n  const login = async (email: string, password: string) => {\n    setError(null);\n    setIsPending(true);\n\n    try {\n      const res = await projectAuth.signInWithEmailAndPassword(email, password);\n      // nullチェックで早期リターン\n      if (res.user === null) return;\n      type addUser = Omit<User, \"id\">;\n      // FIXME:関係ないプロパティも追加・更新できてしまう\n      await documentPoint<addUser>(\"users\", res.user.uid).update({\n        online: true,\n      });\n\n      if (res.user.displayName === null) return;\n      createJWT({ uid: res.user.uid, name: res.user.displayName });\n\n      dispatch({ type: \"LOGIN\", payload: res.user });\n\n      if (!isCancelled) {\n        setIsPending(false);\n        setError(null);\n      }\n    } catch (err) {\n      if (!isCancelled) {\n        if (err instanceof Error) {\n          setError(err.message);\n        }\n        setIsPending(false);\n      }\n    }\n  };\n\n  useEffect(() => {\n    return () => setIsCancelled(true);\n  }, []);\n\n  return { login, isPending, error };\n};\n","import { FC, FormEvent, useState } from \"react\";\nimport { useSignup } from \"../../hooks/useSignup\";\nimport { Link } from \"react-router-dom\";\n\nconst Signup: FC = () => {\n  const [email, setEmail] = useState<string>(\"\");\n  const [password, setPassword] = useState<string>(\"\");\n  const [displayName, setDisplayName] = useState<string>(\"\");\n  const [thumbnail, setThumbnail] = useState<File | null>(null);\n  const [thumbnailError, setThumbnailError] = useState<string | null>(null);\n  const { signup, isPending, error } = useSignup();\n\n  const handleSubmit = (e: FormEvent) => {\n    e.preventDefault();\n    // nullチェックで早期リターン\n    if (thumbnail === null) return;\n    signup(email, password, displayName, thumbnail);\n  };\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setThumbnail(null);\n    let selected;\n    // NOTE:型定義のnullエラー対策\n    if (e.target.files !== null) {\n      selected = e.target.files[0];\n    }\n    if (!selected) {\n      setThumbnailError(\"please select a file\");\n      return;\n    }\n    if (!selected.type.includes(\"image\")) {\n      setThumbnailError(\"selected file must be an image\");\n      return;\n    }\n    if (selected.size > 1000000) {\n      setThumbnailError(\"image file size must be less than 100kb\");\n      return;\n    }\n    setThumbnailError(null);\n    setThumbnail(selected);\n  };\n\n  return (\n    <div className=\"auth-container\">\n      <div className=\"wrapper -w30\">\n        <div className=\"form\">\n          <h1>Sign up</h1>\n          <form onSubmit={handleSubmit}>\n            <input\n              required\n              type=\"email\"\n              onChange={(e) => setEmail(e.target.value)}\n              value={email}\n              placeholder=\"xyz@gmail.com\"\n            />\n            <input\n              required\n              type=\"password\"\n              onChange={(e) => setPassword(e.target.value)}\n              value={password}\n              placeholder=\"Must have atleast 6 characters\"\n            />\n            <input\n              required\n              type=\"text\"\n              onChange={(e) => setDisplayName(e.target.value)}\n              value={displayName}\n              placeholder=\"your name\"\n            />\n            <input required type=\"file\" onChange={handleFileChange} />\n            {thumbnailError && <div className=\"error\">{thumbnailError}</div>}\n\n            {!isPending && <button type=\"submit\">Sign up</button>}\n            {isPending && (\n              <button type=\"submit\" disabled>\n                loading\n              </button>\n            )}\n            {error && <div className=\"error\">{error}</div>}\n\n            <div className=\"forgot-signup\">\n              <Link to=\"/login\">Forgot password?</Link>\n              <Link to=\"/login\">Login</Link>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Signup;\n","import { useState, useEffect } from \"react\";\nimport { projectAuth, projectStorage } from \"../firebase/config\";\nimport { useAuthContext } from \"./useAuthContext\";\nimport { documentPoint } from \"../utilities/converter\";\nimport { User } from \"../@types/dashboard\";\nimport { useToken } from \"../hooks/useToken\";\n\nexport const useSignup = () => {\n  const [isCancelled, setIsCancelled] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [isPending, setIsPending] = useState(false);\n  const { dispatch } = useAuthContext();\n  const { createJWT } = useToken();\n\n  const signup = async (\n    email: string,\n    password: string,\n    displayName: string,\n    thumbnail: File\n  ) => {\n    setError(null);\n    setIsPending(true);\n\n    try {\n      // signup\n      const res = await projectAuth.createUserWithEmailAndPassword(\n        email,\n        password\n      );\n\n      if (!res.user) {\n        throw new Error(\"Could not complete signup\");\n      }\n\n      // upload user thumbnail\n      const uploadPath = `thumbnails/${res.user.uid}/${thumbnail.name}`;\n      const img = await projectStorage.ref(uploadPath).put(thumbnail);\n      const imgUrl = await img.ref.getDownloadURL();\n\n      // add display name to user\n      await res.user.updateProfile({ displayName, photoURL: imgUrl });\n\n      type addUser = Omit<User, \"id\">;\n      await documentPoint<addUser>(\"users\", res.user.uid).set({\n        online: true,\n        displayName,\n        photoURL: imgUrl,\n      });\n\n      if (res.user.displayName === null) return;\n      createJWT({ uid: res.user.uid, name: res.user.displayName });\n      // dispatch login action\n      dispatch({ type: \"LOGIN\", payload: res.user });\n\n      if (!isCancelled) {\n        setIsPending(false);\n        setError(null);\n      }\n    } catch (err) {\n      if (!isCancelled) {\n        if (err instanceof Error) {\n          setError(err.message);\n        }\n        setIsPending(false);\n      }\n    }\n  };\n\n  useEffect(() => {\n    return () => setIsCancelled(true);\n  }, []);\n\n  return { signup, error, isPending };\n};\n","import { FC } from \"react\";\n\ntype Props = {\n  src: string;\n};\n\nconst Avatar: FC<Props> = ({ src }) => {\n  return (\n    <>\n      {src && (\n        <div className=\"avatar\">\n          <img src={src} alt=\"user avatar\" />\n        </div>\n      )}\n    </>\n  );\n};\nexport default Avatar;\n","import { FC, useState, FormEvent } from \"react\";\nimport { firebase, timestamp } from \"../../firebase/config\";\nimport { useAuthContext } from \"../../hooks/useAuthContext\";\nimport { CommentToAdd } from \"../../@types/dashboard\";\nimport FlatButton from \"../Button/FlatButton\";\nimport CloseButton from \"../Button/CloseButton\";\nimport { ProductItem } from \"../../utilities/stripeClient\";\nimport { scrollTop } from \"../../utilities/convertValue\";\n\ntype Props = {\n  referense: firebase.firestore.CollectionReference<CommentToAdd>;\n  item: ProductItem;\n  setToggleModal: React.Dispatch<React.SetStateAction<boolean>>;\n};\n\nconst FormModal: FC<Props> = ({ referense, item, setToggleModal }) => {\n  const [newComment, setNewComment] = useState(\"\");\n  const { user } = useAuthContext();\n  if (!user) throw new Error(\"we cant find your account\");\n\n  const handleSubmit = async (e: FormEvent) => {\n    e.preventDefault();\n    const commentToAdd: CommentToAdd = {\n      displayName: user.displayName,\n      photoURL: user.photoURL,\n      content: newComment,\n      createdAt: timestamp.fromDate(new Date()),\n      id: Math.random(), // FIXME:被る可能性があるのでuuidに変更する\n    };\n\n    try {\n      referense.add(commentToAdd);\n      item.comments = [...item.comments, commentToAdd];\n      setNewComment(\"\");\n    } catch (error) {\n      if (error instanceof Error) {\n        setNewComment(\"\");\n      }\n    } finally {\n      closeModal();\n    }\n  };\n\n  const closeModal = () => {\n    setToggleModal(false);\n    document.body.style.overflow = \"\";\n  };\n\n  const styles = { top: scrollTop() };\n\n  return (\n    <>\n      <div className=\"overlay\" style={styles}>\n        <form className=\"modal\" onSubmit={handleSubmit}>\n          <label>\n            <span>Add new comment:</span>\n            <CloseButton styleName=\"close-modal\" onClick={closeModal} />\n            <textarea\n              required\n              onChange={(e) => setNewComment(e.target.value)}\n              value={newComment}\n            ></textarea>\n          </label>\n          <FlatButton content={\"Add Comment\"} />\n        </form>\n      </div>\n    </>\n  );\n};\n\nexport default FormModal;\n","import { useEffect, useState } from \"react\";\nimport { subCollectionPoint } from \"../utilities/converter\";\nimport { firebase } from \"../firebase/config\";\nimport { firebasePath } from \"../@types/dashboard\";\n\nexport const useSubCollection = <T, U>({\n  collection,\n  document,\n  subCollection,\n}: firebasePath) => {\n  const [documents, setDocuments] = useState<Array<U>>([]);\n  const [error, setError] = useState<string | null>(null);\n  const [\n    referense,\n    setReferense,\n  ] = useState<firebase.firestore.CollectionReference<U> | null>(null);\n\n  useEffect(() => {\n    let ref = subCollectionPoint<T, U>(collection, document, subCollection);\n    if (ref !== undefined) {\n      const unsubscribe = ref.onSnapshot(\n        (snapshot) => {\n          let results: Array<U> = [];\n          snapshot.docs.forEach((doc) => {\n            results.push({ ...doc.data(), id: doc.id });\n          });\n          setReferense(ref);\n          setDocuments(results);\n          setError(null);\n        },\n        (error) => {\n          console.log(error);\n          setError(\"could not fetch the data\");\n        }\n      );\n      // unsubscribe on unmount and clean a function\n      return () => unsubscribe();\n    }\n  }, [collection, document, subCollection]);\n\n  return { documents, error, referense };\n};\n","export default __webpack_public_path__ + \"static/media/icon_person.a9a77996.svg\";","import { FC, useState } from \"react\";\nimport Avatar from \"../../components/Avatar\";\nimport formatDistanceToNow from \"date-fns/formatDistanceToNow\";\nimport { Comment } from \"../../@types/dashboard\";\nimport FormModal from \"../../components/Modal/FormModal\";\nimport FlatButton from \"../../components/Button/FlatButton\";\nimport { ProductItem } from \"../../utilities/stripeClient\";\nimport { useParams } from \"react-router-dom\";\nimport { useSubCollection } from \"../../hooks/useSubCollection\";\nimport { convertedPath } from \"../../utilities/convertValue\";\nimport PersonIcon from \"../../assets/icon/icon_person.svg\";\nimport { ja } from \"date-fns/locale\";\n\ntype Props = {\n  furniture: ProductItem;\n};\n\nconst ProjectComments: FC<Props> = ({ furniture }) => {\n  const [toggleModal, setToggleModal] = useState<boolean>(false);\n  const { id }: { id: string } = useParams();\n\n  const { referense } = useSubCollection<any, any>(\n    convertedPath(`/products/${id}/comments`)\n  );\n\n  const openModal = () => {\n    setToggleModal(true);\n    document.body.style.overflow = \"hidden\";\n  };\n\n  return (\n    <>\n      <div className=\"product-comments\">\n        <ul className=\"comment-list\">\n          <li>\n            <div className=\"auther\">\n              <Avatar src={PersonIcon} />\n              <p>temanashi-tester</p>\n            </div>\n            <div className=\"date\">\n              <p>約5分前</p>\n            </div>\n            <div className=\"content\">\n              <p>free comment area !</p>\n            </div>\n          </li>\n          {furniture.comments?.length > 0 &&\n            furniture.comments?.map((comment: Comment) => (\n              <li key={comment.id}>\n                <div className=\"auther\">\n                  <Avatar src={comment.photoURL} />\n                  <p>{comment.displayName}</p>\n                </div>\n                <div className=\"date\">\n                  <p>\n                    {formatDistanceToNow(comment.createdAt?.toDate(), {\n                      addSuffix: true,\n                      locale: ja,\n                    })}\n                  </p>\n                </div>\n                <div className=\"content\">\n                  <p>{comment.content}</p>\n                </div>\n              </li>\n            ))}\n        </ul>\n        <FlatButton content={\"comment\"} onClick={openModal} />\n        {toggleModal && referense && (\n          <FormModal\n            referense={referense}\n            item={furniture}\n            setToggleModal={setToggleModal}\n          />\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default ProjectComments;\n","import { useReducer, useEffect, useState } from \"react\";\nimport { firebase, timestamp } from \"../firebase/config\";\nimport { documentPoint, collectionPoint } from \"../utilities/converter\";\n\nlet initialState = {\n  document: null,\n  isPending: false,\n  error: null,\n  success: null,\n};\n\ntype CreatedAt = {\n  createdAt: firebase.firestore.Timestamp; // 追加したい型\n};\n\nconst firestoreReducer = (state: any, action: any) => {\n  switch (action.type) {\n    case \"IS_PENDING\":\n      return { isPending: true, document: null, success: false, error: null };\n    case \"ADDED_DOCUMENT\":\n      return {\n        isPending: false,\n        document: action.payload,\n        success: true,\n        error: null,\n      };\n    case \"DELETED_DOCUMENT\":\n      return { isPending: false, document: null, success: true, error: null };\n    case \"UPDATED_DOCUMENT\":\n      return {\n        isPending: false,\n        document: action.payload,\n        success: true,\n        error: null,\n      };\n    case \"ERROR\":\n      return {\n        isPending: false,\n        document: null,\n        success: false,\n        error: action.payload,\n      };\n    default:\n      return state;\n  }\n};\n\nexport const useFirestore = () => {\n  const [response, dispatch] = useReducer(firestoreReducer, initialState);\n  const [isCancelled, setIsCancelled] = useState(false);\n\n  // only dispatch is not cancelled\n  const dispatchIfNotCancelled = (action: any) => {\n    if (!isCancelled) {\n      dispatch(action);\n    }\n  };\n\n  // add a document\n  const addDocument = async <T,>(collection: string, doc: T) => {\n    // 型定義の拡張\n    type TWithCreatedAt = CreatedAt & T;\n    dispatch({ type: \"IS_PENDING\" });\n    try {\n      const createdAt = timestamp.fromDate(new Date());\n      const addedDocument = collectionPoint<TWithCreatedAt>(collection).add({\n        ...doc,\n        createdAt,\n      });\n      dispatchIfNotCancelled({\n        type: \"ADDED_DOCUMENT\",\n        payload: addedDocument,\n      });\n    } catch (err) {\n      if (err instanceof Error) {\n        dispatchIfNotCancelled({ type: \"ERROR\", payload: err.message });\n      }\n    }\n  };\n\n  // delete a document\n  const deleteDocument = async <T,>(collection: string, id: string) => {\n    dispatch({ type: \"IS_PENDING\" });\n    try {\n      await documentPoint<T>(collection, id).delete();\n      dispatchIfNotCancelled({ type: \"DELETED_DOCUMENT\" });\n    } catch (err) {\n      dispatchIfNotCancelled({ type: \"ERROR\", payload: \"could not delete\" });\n    }\n  };\n\n  // update a document\n  const updateDocument = async <T,>(\n    collection: string,\n    id: string,\n    updates: any\n  ) => {\n    dispatch({ type: \"IS_PENDING\" });\n    try {\n      // const updatedDocument = await ref.doc(id).update(updates);\n      const updatedDocument = await documentPoint<T>(collection, id).update(\n        updates\n      );\n      dispatchIfNotCancelled({\n        type: \"UPDATED_DOCUMENT\",\n        payload: updatedDocument,\n      });\n      return updatedDocument;\n    } catch (err) {\n      if (err instanceof Error) {\n        dispatchIfNotCancelled({ type: \"ERROR\", payload: err.message });\n      }\n      return null;\n    }\n  };\n\n  useEffect(() => {\n    return () => setIsCancelled(true);\n  }, []);\n\n  return { addDocument, deleteDocument, updateDocument, response };\n};\n","export default __webpack_public_path__ + \"static/media/icon_add_favorite.7bbb0634.svg\";","export default __webpack_public_path__ + \"static/media/icon_remove_favorite.66089a9f.svg\";","import { useEffect, useState } from \"react\";\nimport { subDocumentPoint } from \"../utilities/converter\";\nimport { firebase } from \"../firebase/config\";\nimport { firebasePath } from \"../@types/dashboard\";\n\ntype Id = {\n  id: string; // 追加したい型\n};\n\nexport const useSubDocument = <T, U>({\n  collection,\n  document,\n  subCollection,\n  subDocument,\n}: firebasePath) => {\n  const [documents, setDocuments] = useState<U & Id>();\n  const [error, setError] = useState<string | null>(null);\n  const [\n    referense,\n    setReferense,\n  ] = useState<firebase.firestore.DocumentReference<U> | null>(null);\n\n  useEffect(() => {\n    const ref = subDocumentPoint<T, U>(\n      collection,\n      document,\n      subCollection,\n      subDocument\n    );\n    if (ref) {\n      const unsubscribe = ref.onSnapshot(\n        (snapshot) => {\n          if (snapshot) {\n            setDocuments({\n              ...(snapshot.data() as U),\n              id: snapshot.id,\n            });\n            setReferense(ref);\n            setError(null);\n          } else {\n            setError(\"no such socument exist\");\n          }\n        },\n        (err) => {\n          console.log(err);\n          setError(\"failed to get document\");\n        }\n      );\n      // clean a function\n      return () => unsubscribe();\n    }\n  }, [collection, document, subCollection, subDocument]);\n\n  return { documents, error, referense };\n};\n","import {\n  ProjectType,\n  User,\n  likedFurnitures,\n  likedUsers,\n} from \"../../@types/dashboard\";\nimport { FC, useState, useEffect } from \"react\";\nimport { timestamp, firebase } from \"../../firebase/config\";\nimport { useAuthContext } from \"../../hooks/useAuthContext\";\nimport AddFavoriteIcon from \"../../assets/icon/icon_add_favorite.svg\";\nimport RemoveFavoriteIcon from \"../../assets/icon/icon_remove_favorite.svg\";\nimport { convertedPath } from \"../../utilities/convertValue\";\nimport { useSubDocument } from \"../../hooks/useSubDocument\";\nimport { ProductItem } from \"../../utilities/stripeClient\";\n\ntype Prop = {\n  furniture: ProductItem;\n};\ntype Id = {\n  id: string;\n};\ntype LikedUser = {\n  documents: (likedUsers & Id) | undefined;\n  error: string | null;\n  referense: firebase.firestore.DocumentReference<likedUsers> | null;\n};\ntype LikedFuritures = {\n  documents: (likedFurnitures & Id) | undefined;\n  error: string | null;\n  referense: firebase.firestore.DocumentReference<likedFurnitures> | null;\n};\n\nconst LikeButton: FC<Prop> = ({ furniture }) => {\n  const [like, setLike] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n  const { user } = useAuthContext();\n  if (!user) throw new Error(\"we cant find your account\");\n\n  const likedUser: LikedUser = useSubDocument<ProjectType, likedUsers>(\n    convertedPath(`/products/${furniture.product.id}/liked_users/${user.uid}`)\n  );\n\n  const likedFurniture: LikedFuritures = useSubDocument<User, likedFurnitures>(\n    convertedPath(`/users/${user.uid}/liked_furnitures/${furniture.product.id}`)\n  );\n\n  const addLikedUser = () => {\n    // NOTE:set中にconverterで定義している型と違う値を入れるとエラーになる\n    if (!likedUser.referense) return;\n    likedUser.referense.set({\n      liked_user: {\n        uid: user.uid,\n        displayName: user.displayName,\n      },\n      createdAt: timestamp.fromDate(new Date()),\n    });\n  };\n\n  const addLikedFurniture = () => {\n    if (!likedFurniture.referense) return;\n    likedFurniture.referense.set({\n      liked_furniture: furniture,\n      createdAt: timestamp.fromDate(new Date()),\n    });\n  };\n\n  const removeLikedUser = () => {\n    if (!likedFurniture.referense) return;\n    likedFurniture.referense.delete();\n  };\n\n  const removeLikedFurniture = () => {\n    if (!likedUser.referense) return;\n    likedUser.referense.delete();\n  };\n\n  const handleClick = () => {\n    setLike(!like);\n    if (like === true) {\n      // FIXME:バッチ書き込み処理なのか、同じ情報ならトップに持ってきてもいいかもしれない\n      removeLikedUser();\n      removeLikedFurniture();\n    }\n    if (like === false) {\n      addLikedUser();\n      addLikedFurniture();\n    }\n  };\n\n  useEffect(() => {\n    if (!likedFurniture.referense) return;\n    const unsubscribe = likedFurniture.referense.onSnapshot(\n      (snapshot) => {\n        if (snapshot.exists) {\n          setLike(true);\n        } else {\n          setLike(false);\n        }\n      },\n      (error) => {\n        console.log(error);\n        setError(\"could not push like button, try again\");\n      }\n    );\n    // unsubscribe on unmount and clean a function\n    return () => unsubscribe();\n  }, [likedFurniture.referense]);\n\n  return (\n    <div className=\"like-button\">\n      <span onClick={handleClick} className=\"favorite\">\n        {like ? (\n          <img src={AddFavoriteIcon} alt=\"\" />\n        ) : (\n          <img src={RemoveFavoriteIcon} alt=\"\" />\n        )}\n        {error && <div className=\"error\">{error}</div>}\n      </span>\n    </div>\n  );\n};\nexport default LikeButton;\n","import { FC } from \"react\";\nimport { useAuthContext } from \"../../hooks/useAuthContext\";\nimport CloseButton from \"../Button/CloseButton\";\nimport { Carousel } from \"react-responsive-carousel\";\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\";\nimport { scrollTop } from \"../../utilities/convertValue\";\n\ntype Props = {\n  src: Array<string>;\n  setToggleModal: React.Dispatch<React.SetStateAction<boolean>>;\n};\n\nconst PreviewModal: FC<Props> = ({ src, setToggleModal }) => {\n  const { user } = useAuthContext();\n  if (!user) throw new Error(\"we cant find your account\");\n\n  const closeModal = () => {\n    setToggleModal(false);\n    document.body.style.overflow = \"\";\n  };\n\n  const styles = { top: scrollTop() };\n\n  //FIXME:スライダーを入れる・拡大機能を入れる\n  return (\n    <>\n      <div className=\"overlay\" style={styles}>\n        <div className=\"modal\">\n          <CloseButton styleName=\"close-modal\" onClick={closeModal} />\n          <Carousel>\n            {src.map((item) => (\n              <div>\n                <img src={item} alt=\"\" />\n              </div>\n            ))}\n          </Carousel>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default PreviewModal;\n","import { useFirestore } from \"../../hooks/useFirestore\";\nimport { useAuthContext } from \"../../hooks/useAuthContext\";\nimport { useHistory } from \"react-router-dom\";\nimport { FC, useState } from \"react\";\nimport LikeButton from \"../../components/Button/LikeButton\";\nimport PreviewModal from \"../../components/Modal/PreviewModal\";\nimport { ProductItem } from \"../../utilities/stripeClient\";\nimport { useParams } from \"react-router-dom\";\nimport Loading from \"../../components/Loading\";\nimport { taxIncludedPrice } from \"../../utilities/convertValue\";\nimport { useCookies } from \"react-cookie\";\nimport ExecuteModal from \"../../components/Modal/ExecuteModal\";\n\ntype Props = {\n  furniture: ProductItem;\n};\n\nconst ProjectSummary: FC<Props> = ({ furniture }) => {\n  const [togglePreviewModal, setTogglePreviewModal] = useState<boolean>(false);\n  const [toggleExecuteModal, setToggleExecuteModal] = useState<boolean>(false);\n  const [isPending, setIsPending] = useState<boolean>(false);\n  const [cookies, setCookie] = useCookies([\"productId\"]);\n\n  const { deleteDocument } = useFirestore();\n  const { id }: { id: string } = useParams();\n  const { user } = useAuthContext();\n  const history = useHistory();\n  if (!user) throw new Error(\"we cant find your account\");\n\n  const addCart = async (productId: string) => {\n    if (!productId) return;\n    setIsPending(true);\n    try {\n      if (!cookies.productId) {\n        const newArray = [productId];\n        setCookie(\"productId\", newArray, { path: \"/\" });\n      } else {\n        const newArray = [productId, ...cookies.productId];\n        setCookie(\"productId\", newArray);\n      }\n    } catch (error) {\n      alert(error);\n    } finally {\n      setIsPending(false);\n      history.push(`/users/${user.uid}/cart`);\n    }\n  };\n\n  const handleDelete = () => {\n    document.body.style.overflow = \"\";\n    setToggleExecuteModal(false);\n    if (furniture.product) deleteDocument<ProductItem>(\"products\", id);\n    history.push(\"/\");\n  };\n\n  const openPreviewModal = () => {\n    setTogglePreviewModal(true);\n    document.body.style.overflow = \"hidden\";\n  };\n  const openExecuteModal = () => {\n    setToggleExecuteModal(true);\n    document.body.style.overflow = \"hidden\";\n  };\n\n  return (\n    <>\n      {isPending && <Loading />}\n      <div className=\"project-summary-container\">\n        <div className=\"thumbnail\">\n          {furniture.product.images.length > 0 ? (\n            <img\n              src={furniture.product.images[0]}\n              alt=\"\"\n              onClick={openPreviewModal}\n            />\n          ) : (\n            <img src=\"https://placehold.jp/200x160.png\" alt=\"\" />\n          )}\n          {togglePreviewModal && (\n            <PreviewModal\n              src={furniture.product.images}\n              setToggleModal={setTogglePreviewModal}\n            />\n          )}\n        </div>\n\n        <h2 className=\"title\">{furniture.product.name}</h2>\n        {Object.keys(furniture.prices).map((priceIndex) => (\n          <div key={priceIndex} className=\"content\">\n            <div className=\"price\">\n              {taxIncludedPrice(furniture.prices[priceIndex].unit_amount)}\n            </div>\n            <p className=\"details\">{furniture.product.description}</p>\n            <div className=\"btnarea\">\n              <button className=\"btn\" onClick={openExecuteModal}>\n                削除\n              </button>\n              {toggleExecuteModal && (\n                <ExecuteModal\n                  message=\"本当に削除しますか？\"\n                  setToggleModal={setToggleExecuteModal}\n                  onClick={() => handleDelete()}\n                />\n              )}\n              <button\n                className=\"btn\"\n                onClick={() => addCart(furniture.product.id)}\n              >\n                購入\n              </button>\n              <LikeButton furniture={furniture} />\n            </div>\n          </div>\n        ))}\n      </div>\n    </>\n  );\n};\nexport default ProjectSummary;\n","import { useParams } from \"react-router-dom\";\nimport FurnitureComments from \"./FurnitureComment\";\nimport FurnitureSummary from \"./FurnitureSummary\";\nimport { FC, useEffect, useState, useCallback } from \"react\";\nimport { productUseCase, ProductItem } from \"../../utilities/stripeClient\";\nimport Loading from \"../../components/Loading\";\n\nconst Project: FC = () => {\n  const [isPending, setIsPending] = useState<boolean>(false);\n  const [productItem, setProductItem] = useState<ProductItem>();\n\n  const { id }: { id: string } = useParams();\n\n  const fetchProductItem = useCallback(async () => {\n    try {\n      setIsPending(true);\n      const productItem = await productUseCase.fetchProductItem(id);\n      setProductItem(productItem);\n    } finally {\n      setIsPending(false);\n    }\n  }, [id]);\n\n  useEffect(() => {\n    fetchProductItem();\n  }, [fetchProductItem]);\n\n  if (isPending) {\n    return <Loading />;\n  }\n  if (!productItem) {\n    return <div className=\"loading\">Loading...</div>;\n  }\n  return (\n    <div className=\"common-container\">\n      <div className=\"product-container\">\n        <FurnitureSummary furniture={productItem} />\n        <FurnitureComments furniture={productItem} />\n      </div>\n    </div>\n  );\n};\nexport default Project;\n","export default __webpack_public_path__ + \"static/media/icon_temple.c57f882d.svg\";","export default __webpack_public_path__ + \"static/media/icon_temple_white.8d1c6e88.svg\";","import { FC } from \"react\";\nimport Hamburger from \"hamburger-react\";\nimport WhiteTempleIcon from \"../assets/icon/icon_temple_white.svg\";\nimport FlatButton from \"./Button/FlatButton\";\nimport { useAuthContext } from \"../hooks/useAuthContext\";\nimport { useHistory } from \"react-router-dom\";\n\ntype Prop = {\n  state: boolean;\n  setState: React.Dispatch<React.SetStateAction<boolean>>;\n};\n\nconst HamburgerMenu: FC<Prop> = ({ state, setState }) => {\n  const history = useHistory();\n  const { user } = useAuthContext();\n  if (!user) throw new Error(\"we cant find your account\");\n\n  const closeHamburger = (path: string) => {\n    document.body.style.overflow = \"\";\n    setState(!state);\n    history.push(path);\n  };\n\n  const handleClick = () => {\n    console.log(\"handleClick\");\n  };\n\n  const scrollTop = (): number => {\n    return Math.max(\n      window.pageYOffset,\n      document.documentElement.scrollTop,\n      document.body.scrollTop\n    );\n  };\n\n  const styles = { top: scrollTop() };\n\n  return (\n    <>\n      <div className=\"responsive-header\">\n        <ul className=\"head\">\n          <li className=\"logo\">\n            <img src={WhiteTempleIcon} alt=\"\" />\n            <span>Temanashi</span>\n          </li>\n          <li className=\"hamburger-box\" onClick={handleClick}>\n            <Hamburger toggled={state} toggle={setState} color=\"#f4f4f4\" />\n          </li>\n        </ul>\n        {state && (\n          <div className=\"responsive-overlay\" style={styles}>\n            <ul className=\"menu\">\n              <li className=\"hamburger-link\">\n                <FlatButton\n                  styleName=\"-link\"\n                  content=\"Dashboard\"\n                  onClick={() => closeHamburger(\"/\")}\n                />\n              </li>\n              <li className=\"hamburger-link\">\n                <FlatButton\n                  styleName=\"-link\"\n                  content=\"New Furniture\"\n                  onClick={() => closeHamburger(\"/create/furniture\")}\n                />\n              </li>\n              <li className=\"hamburger-link\">\n                <FlatButton\n                  styleName=\"-link\"\n                  content=\"Diagnose\"\n                  onClick={() => closeHamburger(\"/diagnose\")}\n                />\n              </li>\n              <li className=\"hamburger-link\">\n                <FlatButton\n                  styleName=\"-link\"\n                  content=\"Shopping Cart\"\n                  onClick={() => closeHamburger(`/users/${user.uid}/cart`)}\n                />\n              </li>\n              <li className=\"hamburger-link\">\n                <FlatButton\n                  styleName=\"-link\"\n                  content=\"My Page\"\n                  onClick={() => closeHamburger(`/users/${user.uid}/favorite`)}\n                />\n              </li>\n            </ul>\n          </div>\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default HamburgerMenu;\n","import Temple from \"../assets/icon/icon_temple.svg\";\nimport { FC, useState } from \"react\";\nimport HamburgerMenu from \"../components/HambergerMenu\";\n\nconst Navbar: FC = () => {\n  const [isOpen, setIsOpen] = useState(false);\n\n  return (\n    <div className={!isOpen ? \"navbar\" : \"navbar -active\"}>\n      <ul className=\"wrapper\">\n        {!isOpen && (\n          <li className=\"logo\">\n            <img src={Temple} alt=\"\" />\n            <span>Temanashi</span>\n          </li>\n        )}\n      </ul>\n      <div className=\"responsive-wrapper\">\n        <HamburgerMenu state={isOpen} setState={setIsOpen} />\n      </div>\n    </div>\n  );\n};\n\nexport default Navbar;\n","export default __webpack_public_path__ + \"static/media/icon_dashboard.bc800f3b.svg\";","export default __webpack_public_path__ + \"static/media/icon_add_circle.e9074d95.svg\";","export default __webpack_public_path__ + \"static/media/icon_feedback.a86b85c4.svg\";","export default __webpack_public_path__ + \"static/media/icon_cart.0f0cd44e.svg\";","import { NavLink } from \"react-router-dom\";\nimport Avatar from \"./Avatar\";\nimport { useAuthContext } from \"../hooks/useAuthContext\";\nimport DashboardIcon from \"../assets/icon/icon_dashboard.svg\";\nimport AddCircleIcon from \"../assets/icon/icon_add_circle.svg\";\nimport FeedbackIcon from \"../assets/icon/icon_feedback.svg\";\nimport CartIcon from \"../assets/icon/icon_cart.svg\";\nimport { FC } from \"react\";\n\nconst Sidebar: FC = () => {\n  const { user } = useAuthContext();\n  if (!user) throw new Error(\"we cant find your account\");\n\n  return (\n    <div className=\"sidebar\">\n      <div className=\"sidebar-content\">\n        <div className=\"user\">\n          <NavLink exact to={`/users/${user.uid}/favorite`}>\n            {/* nullチェック */}\n            {user.photoURL && <Avatar src={user.photoURL} />}\n            <p>hey {user.displayName}</p>\n          </NavLink>\n        </div>\n        <nav className=\"links\">\n          <ul>\n            <li>\n              <NavLink exact to=\"/\">\n                <img src={DashboardIcon} alt=\"dashboard icon\" />\n                <span>Dashboard</span>\n              </NavLink>\n            </li>\n            <li>\n              <NavLink to=\"/create/furniture\">\n                <img src={AddCircleIcon} alt=\"add project icon\" />\n                <span>New Furniture</span>\n              </NavLink>\n            </li>\n            <li>\n              <NavLink to=\"/diagnose\">\n                <img src={FeedbackIcon} alt=\"add project icon\" />\n                <span>Diagnose</span>\n              </NavLink>\n            </li>\n            <li>\n              <NavLink to={`/users/${user.uid}/cart`}>\n                <img src={CartIcon} alt=\"add project icon\" />\n                <span>Shopping Cart</span>\n              </NavLink>\n            </li>\n          </ul>\n        </nav>\n      </div>\n    </div>\n  );\n};\n\nexport default Sidebar;\n","import { useCollection } from \"../hooks/useCollection\";\nimport Avatar from \"../components/Avatar\";\nimport { User } from \"../@types/dashboard\";\nimport { FC } from \"react\";\nimport { convertedPath } from \"../utilities/convertValue\";\n\nconst OnlineUsers: FC = () => {\n  const { error, documents } = useCollection<User>(convertedPath(\"/users\"));\n  return (\n    <div className=\"user-list\">\n      <h2>All Users</h2>\n      {error && <div className=\"error\">{error}</div>}\n      {documents &&\n        documents.map((user) => (\n          <div key={user.id} className=\"user-list-item\">\n            {user.online && <span className=\"online-user\"></span>}\n            <span>{user.displayName}</span>\n            <Avatar src={user.photoURL} />\n          </div>\n        ))}\n    </div>\n  );\n};\nexport default OnlineUsers;\n","import { useEffect, useState, useRef } from \"react\";\nimport { firebase } from \"../firebase/config\";\nimport { collectionPoint } from \"../utilities/converter\";\nimport { firebasePath } from \"../@types/dashboard\";\n\nexport const useCollection = <T,>(\n  { collection }: firebasePath,\n  _query?: [string, WhereFilterOp, any],\n  _orderBy?: [string, OrderByDirection]\n) => {\n  const [documents, setDocuments] = useState<Array<T>>([]);\n  const [error, setError] = useState<string | null>(null);\n\n  // if we don't use a ref --> infinite loop in useEffect\n  // _query is an array and is \"different\" on every function call\n  const query = useRef(_query).current;\n  const orderBy = useRef(_orderBy).current;\n\n  useEffect(() => {\n    let ref = collectionPoint<T>(collection);\n    if (ref !== undefined) {\n      if (query) {\n        ref = ref.where(...query) as firebase.firestore.CollectionReference<T>;\n      }\n      if (orderBy) {\n        if (ref === null) return;\n        ref = ref.orderBy(\n          ...orderBy\n        ) as firebase.firestore.CollectionReference<T>;\n      }\n      const unsubscribe = ref.onSnapshot(\n        (snapshot) => {\n          let results: Array<T> = [];\n          snapshot.docs.forEach((doc) => {\n            results.push({ ...doc.data(), id: doc.id });\n          });\n          setDocuments(results);\n          setError(null);\n        },\n        (error) => {\n          console.log(error);\n          setError(\"could not fetch the data\");\n        }\n      );\n      // unsubscribe on unmount and clean a function\n      return () => unsubscribe();\n    }\n  }, [collection, query, orderBy]);\n\n  return { documents, error };\n};\n","export default __webpack_public_path__ + \"static/media/icon_thumb_up.d73a0189.svg\";","export default __webpack_public_path__ + \"static/media/icon_thumb_down.2a7a6a18.svg\";","export default __webpack_public_path__ + \"static/media/icon_undo.64b4f6ca.svg\";","import { FC, useState, useEffect } from \"react\";\n\ntype Props = {\n  width: number;\n  percent: number;\n};\n\nconst ProgressBar: FC<Props> = ({ width, percent }) => {\n  const [value, setValue] = useState<number>(0);\n\n  useEffect(() => {\n    setValue(percent * width);\n  }, [width, percent]);\n\n  return (\n    <div className=\"progress-div\" style={{ width: `${width}%` }}>\n      <div style={{ width: `${value}%` }} className=\"progress\" />\n    </div>\n  );\n};\n\nexport default ProgressBar;\n","import React, { FC, useState, useRef, useMemo } from \"react\";\nimport TinderCard from \"react-tinder-card\";\nimport { useHistory } from \"react-router-dom\";\nimport ThumbUp from \"../assets/icon/icon_thumb_up.svg\";\nimport ThumbDown from \"../assets/icon/icon_thumb_down.svg\";\nimport Undo from \"../assets/icon/icon_undo.svg\";\nimport { ProductDoc } from \"../@types/stripe\";\nimport ProgressBar from \"./ProgressBar\";\nimport { delay } from \"../utilities/convertValue\";\nimport Loading from \"../components/Loading\";\n// import TinderCard from '../react-tinder-card/index'\n\ntype Props = {\n  db: Array<ProductDoc>;\n};\n\nconst TinderSwipe: FC<Props> = ({ db }) => {\n  const history = useHistory();\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n  const [lastDirection, setLastDirection] = useState<string>();\n  const [currentIndex, setCurrentIndex] = useState<number>(db.length - 1);\n  const [percent, setPercent] = useState<number>(0);\n  /**\n   * レンダリングされても状態を保つ（記録する）\n   *\n   */\n  const currentIndexRef = useRef(currentIndex);\n  /**\n   * dbのlengthだけuseRefを生成する\n   * TinderSwipeを通すことでswipeメソッドとrestoreCardメソッドを付与する(useImperativeHandle)\n   */\n  const childRefs = useMemo<any>(\n    () =>\n      Array(db.length)\n        .fill(0)\n        .map((i) => React.createRef()),\n    [db.length]\n  );\n  /**\n   * プログレスバーの進捗率を計算する\n   */\n  const progressBarCalclation = (val: number) => {\n    const result = val + 1;\n    const result2 = result / db.length;\n    const result3 = 1 - result2;\n    setPercent(result3);\n  };\n  /**\n   *　useRefを更新する（valは基本1 or -1になる）\n   */\n  const updateCurrentIndex = async (val: number) => {\n    setCurrentIndex(val);\n    currentIndexRef.current = val;\n    progressBarCalclation(val);\n    if (currentIndexRef.current === -1) {\n      await delay(300); // progressbarのdelayを待つ\n      setIsLoading(true);\n      await delay(2000); // NOTE:意図的ナビゲーションを遅らせないとレンダリングについてこれずに固まる\n      setIsLoading(false);\n      history.push(\"/diagnose/result\");\n    }\n  };\n  /**\n   * goback可能かを監視する\n   * DBが5の場合4の時はgobackできない（初期gobackを不可にする）\n   */\n  const canGoBack = currentIndex < db.length - 1;\n  /**\n   * スワイプ可能かを監視する\n   * DBが5の場合4,3,2,1,0と減っていく\n   */\n  const canSwipe = currentIndex >= 0;\n\n  const outOfFrame = (idx: number) => {\n    currentIndexRef.current >= idx && childRefs[idx].current.restoreCard();\n  };\n  /**\n   * 手動でのスワイプの処理（押下式のスワイプも最終的にはこの関数を叩いている）\n   * currentIndexを-1する\n   */\n  const swiped = (direction: string, index: number) => {\n    setLastDirection(direction);\n    updateCurrentIndex(index - 1);\n    console.log(lastDirection);\n  };\n  /**\n   *　ライブラリのonSwipeメソッドを叩く>ローカルのswipeメソッドを叩く\n   */\n  const swipe = async (direction: string) => {\n    if (canSwipe && currentIndex < db.length) {\n      await childRefs[currentIndex].current.swipe(direction);\n    }\n  };\n  /**\n   * gobackする\n   * currentIndexを+1する\n   */\n  const goBack = async () => {\n    if (!canGoBack) return;\n    const newIndex = currentIndex + 1;\n    updateCurrentIndex(newIndex);\n    await childRefs[newIndex].current.restoreCard();\n  };\n\n  return (\n    <div className=\"common-container\">\n      {isLoading && <Loading message=\"loading\" />}\n      <div className=\"tinder-swipe\">\n        <ProgressBar width={100} percent={percent} />\n        <div className=\"cardContainer\">\n          {db.map((character, index) => (\n            <TinderCard\n              ref={childRefs[index]}\n              className=\"swipe\"\n              key={character.name}\n              onSwipe={(dir) => swiped(dir, index)}\n              onCardLeftScreen={() => outOfFrame(index)}\n            >\n              <div\n                style={{ backgroundImage: \"url(\" + character.images[0] + \")\" }}\n                className=\"card\"\n              >\n                <h3>{character.name}</h3>\n              </div>\n            </TinderCard>\n          ))}\n        </div>\n        <div className=\"buttons\">\n          <button onClick={() => swipe(\"left\")}>\n            <img src={ThumbDown} alt=\"\" />\n          </button>\n          <button onClick={() => goBack()}>\n            <img src={Undo} alt=\"\" />\n          </button>\n          <button onClick={() => swipe(\"right\")}>\n            <img src={ThumbUp} alt=\"\" />\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default TinderSwipe;\n","import { FC } from \"react\";\nimport TinderSwipe from \"../../components/TinderSwipe\";\nimport { useRandomDocument } from \"../../hooks/useRandomDocument\";\nimport Loading from \"../../components/Loading\";\n\nconst Diagnose: FC = () => {\n  const { documents } = useRandomDocument();\n\n  return (\n    <main className=\"root\">\n      {documents.length === 0 && <Loading />}\n      {documents.length > 0 && <TinderSwipe db={documents} />}\n    </main>\n  );\n};\nexport default Diagnose;\n","import { useEffect, useState } from \"react\";\nimport { projectFirestore } from \"../firebase/config\";\nimport { ProductDoc } from \"../@types/stripe\";\nimport { useCookies } from \"react-cookie\";\n\nexport const useRandomDocument = () => {\n  const [documents, setDocuments] = useState<Array<ProductDoc>>([]);\n  const [cookies] = useCookies([\"random\"]);\n  const randomIndex = Number(cookies.random);\n\n  useEffect(() => {\n    let indexs: Array<string> = [];\n    let randomDocument: Array<ProductDoc> = [];\n\n    async function handleAsync() {\n      while (randomDocument.length < 5) {\n        const queryIndex = String(Math.floor(Math.random() * randomIndex + 1)); // DBの中に格納されている商品数以下の数字をランダムで出力する\n        if (!indexs.includes(queryIndex)) {\n          indexs = [...indexs, queryIndex];\n          const productsRef = await projectFirestore.collection(\"products\");\n          const snapshot = await productsRef\n            .orderBy(\"metadata.random\")\n            .startAt(queryIndex)\n            .endAt(queryIndex)\n            .get(); // startAtとendAtを同一に指定することでユニークな結果を出力できる\n          const data = snapshot.docs.map((doc) => {\n            return { ...(doc.data() as ProductDoc), id: doc.id };\n          });\n          randomDocument = [...randomDocument, ...data];\n          if (randomDocument.length === 5) {\n            setDocuments(randomDocument);\n          }\n        }\n      }\n    }\n    handleAsync();\n  }, [randomIndex]);\n\n  return { documents };\n};\n","import { FC, useState } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { useAuthContext } from \"../hooks/useAuthContext\";\n\nconst tabList: Array<string> = [\"favorite\", \"history\", \"account\"];\n\nconst UserNavbar: FC = () => {\n  const { user } = useAuthContext();\n  if (!user) throw new Error(\"we cant find your account\");\n  const [currentTab, setCurrentTab] = useState<number>(0);\n\n  const changeTab = (index: number) => {\n    const newIdx = index;\n    setCurrentTab(newIdx);\n  };\n\n  return (\n    <ul className=\"user-tab-bar\">\n      {tabList.map((tab, index) => (\n        <NavLink\n          to={`/users/${user.uid}/${tab}`}\n          key={tab}\n          onClick={() => changeTab(index + 1)}\n          className={currentTab === index + 1 ? \"active\" : \"\"}\n        >\n          {tab}\n        </NavLink>\n      ))}\n    </ul>\n  );\n};\nexport default UserNavbar;\n","export default __webpack_public_path__ + \"static/media/icon_not_found.f31d6542.svg\";","import { FC } from \"react\";\nimport NotFoundIcon from \"../assets/icon/icon_not_found.svg\";\n\nconst NotFound: FC = () => {\n  return (\n    <div className=\"not-found-container\">\n      <img src={NotFoundIcon} alt=\"\" />\n      <p className=\"message\">Not Found...</p>\n    </div>\n  );\n};\nexport default NotFound;\n","import { FC } from \"react\";\nimport UserNavbar from \"../../components/UserNavbar\";\nimport { useSubCollection } from \"../../hooks/useSubCollection\";\nimport { convertedPath } from \"../../utilities/convertValue\";\nimport { User, likedFurnitures } from \"../../@types/dashboard\";\nimport { useAuthContext } from \"../../hooks/useAuthContext\";\nimport ProductList from \"../../components/DefinitionList/ProductList\";\nimport { ProductItem } from \"../../utilities/stripeClient\";\n// pendingを追加したい\n// import Loading from \"../../components/Loading\";\nimport NotFound from \"../../components/NotFound\";\n\nconst UserFavorite: FC = () => {\n  const { user } = useAuthContext();\n  // nullチェック・通常のreturnだとエラーになる\n  if (!user) throw new Error(\"we cant find your account\");\n  const { documents, error } = useSubCollection<User, likedFurnitures>(\n    convertedPath(`/users/${user.uid}/liked_furnitures`)\n  );\n\n  // documentsの配列の中からliked_projectsを取り出す;\n  const getLikedFurnitures = (\n    documents: Array<likedFurnitures>\n  ): Array<ProductItem> => {\n    const likedFurnitures = documents.map((p) => {\n      return p.liked_furniture;\n    });\n    return likedFurnitures;\n  };\n\n  if (error) {\n    return <div className=\"error\">{error}</div>;\n  }\n\n  return (\n    <>\n      <UserNavbar />\n      <div className=\"user-container\">\n        <div className=\"inner\">\n          {documents.length === 0 && <NotFound />}\n          {/* {documents.length === 0 && <Loading />} */}\n          {documents.length !== 0 && (\n            <ProductList productItems={getLikedFurnitures(documents)} />\n          )}\n        </div>\n      </div>\n    </>\n  );\n};\nexport default UserFavorite;\n","import { FC, FormEvent } from \"react\";\nimport UserNavbar from \"../../components/UserNavbar\";\nimport { projectFunctions, isEmulating } from \"../../firebase/config\";\nimport axios from \"axios\";\nimport { useAuthContext } from \"../../hooks/useAuthContext\";\nimport { useCookies } from \"react-cookie\";\nimport { useLogout } from \"../../hooks/useLogout\";\nimport { useHistory } from \"react-router-dom\";\n\ntype Response = {\n  message: string;\n  jwt: string;\n};\n\nconst UserAccount: FC = () => {\n  const { user } = useAuthContext();\n  if (!user) throw new Error(\"we cant find your account\");\n  const [cookies, setCookie, removeCookie] = useCookies([\"jwt\", \"productId\"]);\n  const { logout, isPending } = useLogout();\n  const history = useHistory();\n\n  const handleSubmit = (e: FormEvent) => {\n    e.preventDefault();\n    logout();\n    history.push(\"/login\");\n  };\n\n  const onCallTest = () => {\n    const helloOnCall = projectFunctions.httpsCallable(\"helloOnCall\");\n    helloOnCall({ name: `shun` }).then((result) => {\n      console.log(result.data);\n    });\n  };\n  const onRequestTest = async () => {\n    const result = await axios.get(\n      `${process.env.REACT_APP_BASE_URL_EMULATOR}/helloOnRequest`\n    );\n    console.log(result, \"result\");\n  };\n  const getAxiosTest = async () => {\n    const result = await axios.get(\n      `${process.env.REACT_APP_BASE_URL}/api/hello`\n    );\n    console.log(result, \"result\");\n  };\n  const createJWT = async () => {\n    const params = {\n      uid: user.uid,\n      name: user.displayName,\n    };\n    const result = await axios.post<Response>(\n      `${process.env.REACT_APP_BASE_URL}/api/jwt`,\n      params\n    );\n    setCookie(\"jwt\", result.data.jwt, { path: \"/\" });\n    console.log(result, \"result\");\n    console.log(cookies, \"cookies\");\n  };\n  const verifyJWT = async () => {\n    const headers = {\n      Authorization: `Bearer ${cookies.jwt}`,\n    };\n    const result = await axios.get(\n      `${process.env.REACT_APP_BASE_URL}/api/jwt/check`,\n      { headers }\n    );\n    console.log(result, \"result\");\n  };\n\n  const removeProductIdCookie = () => {\n    removeCookie(\"productId\", { path: \"/\" });\n    console.log(cookies);\n  };\n\n  const emulatingTest = async () => {\n    const result = await axios.get(\n      `${process.env.REACT_APP_BASE_URL_EMULATOR}/api/hello`\n      // `${process.env.REACT_APP_BASE_URL_EMULATOR}/helloOnRequest`\n    );\n    console.log(process.env.REACT_APP_BASE_URL_EMULATOR);\n    console.log(result, \"check on emulator\");\n  };\n  return (\n    <>\n      <UserNavbar />\n      <div className=\"user-container\">\n        <div className=\"inner\">\n          <button onClick={onCallTest} className=\"btn\">\n            OnCallTest\n          </button>\n          <button onClick={onRequestTest} className=\"btn\">\n            OnRequestTest\n          </button>\n          <button onClick={getAxiosTest} className=\"btn\">\n            GetAxiosTest\n          </button>\n          <button onClick={createJWT} className=\"btn\">\n            CreateJWT\n          </button>\n          <button onClick={verifyJWT} className=\"btn\">\n            verifyJWT\n          </button>\n          <button onClick={removeProductIdCookie} className=\"btn\">\n            removeProductIdCookie\n          </button>\n          {isEmulating && (\n            <button onClick={emulatingTest} className=\"btn\">\n              emulatingTest\n            </button>\n          )}\n          {!isEmulating && (\n            <button onClick={emulatingTest} className=\"btn -disabled\" disabled>\n              not work emulating test...\n            </button>\n          )}\n\n          {!isPending && (\n            <button onClick={handleSubmit} className=\"btn\">\n              Logout\n            </button>\n          )}\n          {isPending && (\n            <button onClick={handleSubmit} className=\"btn -disabled\" disabled>\n              Logging out...\n            </button>\n          )}\n        </div>\n      </div>\n    </>\n  );\n};\nexport default UserAccount;\n","import { FC } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport formatDistanceToNow from \"date-fns/formatDistanceToNow\";\nimport { ja } from \"date-fns/locale\";\n\ntype Prop = {\n  paymentItems: any;\n};\n\nconst PaymentList: FC<Prop> = ({ paymentItems }) => {\n  return (\n    <div className=\"payment-list\">\n      {paymentItems &&\n        paymentItems.map((payment: any) => (\n          <div key={payment.id}>\n            {payment.items.map((item: any) => (\n              <div key={item.id} className=\"box\">\n                <p className=\"name\">\n                  {item.description}\n                  <span className=\"date\">\n                    (\n                    {formatDistanceToNow(new Date(item.price.created), {\n                      addSuffix: true,\n                      locale: ja,\n                    })}\n                    )\n                  </span>\n                </p>\n\n                <Link to={`/furnitures/${item.price.product}`} className=\"link\">\n                  詳細を見る\n                </Link>\n              </div>\n            ))}\n          </div>\n        ))}\n    </div>\n  );\n};\nexport default PaymentList;\n","import { FC, useEffect, useState } from \"react\";\nimport UserNavbar from \"../../components/UserNavbar\";\nimport { useAuthContext } from \"../../hooks/useAuthContext\";\nimport { productUseCase } from \"../../utilities/stripeClient\";\nimport PaymentList from \"../../components/DefinitionList/PaymentList\";\nimport Loading from \"../../components/Loading\";\nimport NotFound from \"../../components/NotFound\";\n\nconst UserHistory: FC = () => {\n  const [isPending, setIsPending] = useState<boolean>(false);\n  const [payments, setPayments] = useState<any[]>([]);\n  const { user } = useAuthContext();\n  // nullチェック・通常のreturnだとエラーになる\n  if (!user) throw new Error(\"we cant find your account\");\n\n  const fetchPayments = async () => {\n    try {\n      setIsPending(true);\n      const results = await productUseCase.fetchPayments(user.uid);\n      setPayments(results);\n    } finally {\n      setIsPending(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchPayments();\n    // eslint-disable-next-line\n  }, []);\n\n  return (\n    <>\n      <UserNavbar />\n      {isPending && <Loading />}\n      <div className=\"user-container\">\n        <div className=\"inner\">\n          {payments.length !== 0 && <PaymentList paymentItems={payments} />}\n          {payments.length === 0 && <NotFound />}\n        </div>\n      </div>\n    </>\n  );\n};\nexport default UserHistory;\n","import { FC } from \"react\";\n\ninterface Props {\n  state: boolean;\n  setState: React.Dispatch<React.SetStateAction<boolean>>;\n  text: string;\n}\n\nconst InputCheckbox: FC<Props> = ({ state, setState, text }) => {\n  return (\n    <>\n      <div className=\"checkbox-container\">\n        {state && (\n          <label htmlFor=\"checkbox-area\" className=\"checkbox\">\n            <span className=\"icon -checked\"></span>\n          </label>\n        )}\n        {!state && (\n          <label htmlFor=\"checkbox-area\" className=\"checkbox\">\n            <span className=\"icon\"></span>\n          </label>\n        )}\n        <input\n          required\n          type=\"checkbox\"\n          onChange={() => setState(!state)}\n          id=\"checkbox-area\"\n          hidden\n        />\n        <p className=\"text\">{text}</p>\n      </div>\n    </>\n  );\n};\n\nexport default InputCheckbox;\n","export default __webpack_public_path__ + \"static/media/icon_add.0d36f7d1.svg\";","export default __webpack_public_path__ + \"static/media/icon_remove.219bfad7.svg\";","import { FC, useState } from \"react\";\nimport AddIcon from \"../assets/icon/icon_add.svg\";\nimport RemoveIcon from \"../assets/icon/icon_remove.svg\";\n\ntype Prop = {\n  add: Function;\n  priceIndex: string;\n};\n\nconst Counter: FC<Prop> = ({ add, priceIndex }) => {\n  const [count, setCount] = useState<number>(1);\n  const [isIncrementActive, setIsIncrementActive] = useState<boolean>(false);\n  const [isDecrementActive, setIsDecrementActive] = useState<boolean>(true);\n\n  // NOTE:増減1~5までを仮として設定する\n  const incrementCount = (increment: number) => {\n    setCount(count + increment);\n    if (count !== 1 || 2) {\n      setIsDecrementActive(false);\n    }\n    if (count === 4) {\n      setIsIncrementActive(true);\n    }\n    add(priceIndex, count + increment);\n  };\n  const decreaseCount = (decrement: number) => {\n    setCount(count + decrement);\n    if (count + decrement === 1) {\n      setIsDecrementActive(true);\n    }\n    if (count !== 4) {\n      setIsIncrementActive(false);\n    }\n    add(priceIndex, count + decrement);\n  };\n\n  return (\n    <div className=\"counter-container\">\n      <button\n        onClick={() => decreaseCount(-1)}\n        disabled={isDecrementActive}\n        className=\"counter\"\n      >\n        <img src={RemoveIcon} alt=\"remove icon\" />\n      </button>\n      <span className=\"count\">{count}</span>\n      <button\n        onClick={() => incrementCount(1)}\n        disabled={isIncrementActive}\n        className=\"counter\"\n      >\n        <img src={AddIcon} alt=\"add icon\" />\n      </button>\n    </div>\n  );\n};\n\nexport default Counter;\n","import { FC } from \"react\";\n\ntype Props = {\n  styleName?: string;\n};\n\nconst Divider: FC<Props> = ({ styleName }) => {\n  return (\n    <>\n      <div className={`divider ${styleName}`} />\n    </>\n  );\n};\nexport default Divider;\n","export default __webpack_public_path__ + \"static/media/icon_delete.1129c53a.svg\";","import { Link } from \"react-router-dom\";\nimport { FC } from \"react\";\nimport {\n  ProductItem,\n  ProductItemWithoutComment,\n} from \"../../utilities/stripeClient\";\nimport { useAuthContext } from \"../../hooks/useAuthContext\";\nimport { taxIncludedPrice } from \"../../utilities/convertValue\";\nimport Counter from \"../../components/Counter\";\nimport { useCookies } from \"react-cookie\";\nimport { useHistory } from \"react-router-dom\";\nimport Divider from \"../../components/Divider\";\nimport DeleteIcon from \"../../assets/icon/icon_delete.svg\";\nimport Image from \"../Image\";\n\ntype Props = {\n  productItems: Array<ProductItem | ProductItemWithoutComment>;\n  selectProduct: Function;\n  removeProduct: Function;\n};\n\nconst CartList: FC<Props> = ({\n  productItems,\n  selectProduct,\n  removeProduct,\n}) => {\n  const [cookies, setCookie] = useCookies([\"productId\"]);\n  const { user } = useAuthContext();\n  const history = useHistory();\n\n  // nullチェック・通常のreturnだとエラーになる\n  if (!user) throw new Error(\"we cant find your account\");\n\n  const HandleRemove = (productId: string, priceId: string) => {\n    const result = cookies.productId.filter((item: string) => {\n      return item !== productId;\n    });\n    setCookie(\"productId\", result);\n    removeProduct(priceId);\n    // NOTE:全て削除されたたらdashboardにリダイレクトさせる\n    if (result.length === 0) {\n      history.push(`/`);\n    }\n  };\n\n  return (\n    <div className=\"cart-list\">\n      {productItems &&\n        productItems.map((item: ProductItem | ProductItemWithoutComment) => (\n          <>\n            <div className=\"wrapper\">\n              <Link\n                to={`/furnitures/${item.product.id}`}\n                key={item.product.id}\n                className=\"thumbnail\"\n              >\n                {item.product.images.length > 0 ? (\n                  <Image src={item.product.images[0]} />\n                ) : (\n                  <Image src=\"https://placehold.jp/230x160.png\" />\n                )}\n              </Link>\n              <div className=\"content\">\n                {Object.keys(item.prices).map((priceIndex) => (\n                  <>\n                    <div className=\"details\">\n                      <p className=\"name\">\n                        {item.product.name}\n                        <span className=\"price\">\n                          {taxIncludedPrice(\n                            item.prices[priceIndex].unit_amount\n                          )}\n                        </span>\n                      </p>\n                      <div className=\"btnarea\">\n                        <Counter add={selectProduct} priceIndex={priceIndex} />\n                      </div>\n                    </div>\n                    <div>\n                      <img\n                        src={DeleteIcon}\n                        alt=\"\"\n                        className=\"delete-icon\"\n                        onClick={() =>\n                          HandleRemove(item.product.id, priceIndex)\n                        }\n                      />\n                    </div>\n                  </>\n                ))}\n              </div>\n            </div>\n            <Divider />\n          </>\n        ))}\n    </div>\n  );\n};\nexport default CartList;\n","import { FC, useState } from \"react\";\nimport { line_item, productUseCase } from \"../../utilities/stripeClient\";\nimport { useAuthContext } from \"../../hooks/useAuthContext\";\nimport { useCartDocument } from \"../../hooks/useCartDocument\";\nimport Loading from \"../../components/Loading\";\nimport InpuCheckbox from \"../../components/Input/InputCheckbox\";\nimport { useToken } from \"../../hooks/useToken\";\nimport { useLogout } from \"../../hooks/useLogout\";\nimport { useHistory } from \"react-router-dom\";\nimport CartList from \"../../components/DefinitionList/CartList\";\nimport NotFound from \"../../components/NotFound\";\n\nconst Cart: FC = () => {\n  const [isAccepted, setIsAccepted] = useState<boolean>(false);\n  const [isPendingBuy, setIsPendingBuy] = useState<boolean>(false);\n  const [line_items, setLinetems] = useState<Array<line_item>>([]);\n  const { verifyJWT } = useToken();\n  const { logout } = useLogout();\n  const history = useHistory();\n\n  const { user } = useAuthContext();\n  if (!user) throw new Error(\"we cant find your account\");\n\n  const { documents } = useCartDocument();\n\n  const onClickBuy = async () => {\n    let formatlineItems: { [key: string]: line_item } = {};\n    let documentsLineItems: Array<line_item> = [];\n\n    documents.forEach((document) => {\n      Object.keys(document.prices).forEach((priceIndex: string) => {\n        documentsLineItems = [\n          ...documentsLineItems,\n          { price: priceIndex, quantity: 1 },\n        ];\n      });\n    });\n\n    if (line_items.length !== 0) {\n      formatlineItems = line_items.reduce(\n        (acc: { [key: string]: line_item }, v: line_item) => {\n          acc[v.price] = v;\n          return acc;\n        },\n        {}\n      );\n    }\n\n    const resultsLineItems = documentsLineItems.map(\n      (item: line_item) => formatlineItems[item.price] ?? item\n    );\n\n    const token = await verifyJWT();\n\n    if (!token) {\n      alert(\"認証トークンが有効期限切れです。ログインしなおしてください。\");\n      logout();\n      history.push(\"/login\");\n      return;\n    }\n\n    try {\n      setIsPendingBuy(true);\n      const uid = user.uid;\n      const seccess_url = `${window.location.origin}/complete`;\n      const cancel_url = `${window.location.origin}/error`;\n      await productUseCase.buy(uid, resultsLineItems, seccess_url, cancel_url);\n    } catch (error) {\n      if (error instanceof Error) {\n        alert(`Error: ${!!error.message ? error.message : error}`);\n      }\n    } finally {\n      setIsPendingBuy(false);\n    }\n  };\n\n  const checkSameProduct = (price: string): Array<line_item> => {\n    const result = line_items.filter((item: line_item) => {\n      return item.price !== price;\n    });\n    return result;\n  };\n\n  const selectProduct = async (price: string, quantity: number) => {\n    const lineItem: line_item = {\n      price,\n      quantity,\n    };\n    const checkedProduct = await checkSameProduct(price);\n    const result = [...checkedProduct, lineItem];\n    await setLinetems(result);\n  };\n\n  const removeProduct = async (price: string) => {\n    const result = await checkSameProduct(price);\n    setLinetems(result);\n  };\n\n  const handleAlert = () => {\n    alert(\"利用規約に同意してください\");\n  };\n\n  return (\n    <div className=\"common-container\">\n      {isPendingBuy && <Loading />}\n      {documents.length === 0 && <NotFound />}\n      {documents.length !== 0 && (\n        <CartList\n          productItems={documents}\n          selectProduct={selectProduct}\n          removeProduct={removeProduct}\n        />\n      )}\n      {documents.length !== 0 && (\n        <div className=\"accept-block\">\n          <InpuCheckbox\n            state={isAccepted}\n            setState={setIsAccepted}\n            text=\"利用規約・個人情報の取り扱いについて同意しますか？\"\n          />\n          {isAccepted && (\n            <button className=\"btn\" onClick={onClickBuy}>\n              購入する\n            </button>\n          )}\n          {!isAccepted && (\n            <button className=\"btn -disabled\" onClick={handleAlert}>\n              購入する\n            </button>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\nexport default Cart;\n","import { useEffect, useState } from \"react\";\nimport {\n  productUseCase,\n  ProductItemWithoutComment,\n} from \"../utilities/stripeClient\";\nimport { useCookies } from \"react-cookie\";\n\nexport const useCartDocument = () => {\n  const [documents, setDocuments] = useState<Array<ProductItemWithoutComment>>(\n    []\n  );\n  const [cookies] = useCookies([\"productId\"]);\n\n  useEffect(() => {\n    async function handleAsync() {\n      // NOTE:promisesの型推論がされない\n      const promises: Array<\n        Promise<ProductItemWithoutComment>\n      > = cookies.productId.map(\n        async (productId: string): Promise<ProductItemWithoutComment> => {\n          const productItem = await productUseCase.fetchProductItemWitoutComment(\n            productId\n          );\n          return productItem;\n        }\n      );\n      const result = await Promise.all(promises);\n      setDocuments(result);\n    }\n    if (cookies.productId) {\n      handleAsync();\n    }\n  }, [cookies.productId]);\n\n  return { documents };\n};\n","import { FC } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nconst Complete: FC = () => {\n  return (\n    <>\n      <div className=\"error-container\">\n        <div className=\"error-block\">\n          <div className=\"main\">\n            <div className=\"bubble\"></div>\n            <div className=\"bubble\"></div>\n            <div className=\"bubble\"></div>\n            <div className=\"bubble\"></div>\n            <div className=\"bubble\"></div>\n            <div className=\"bubble\"></div>\n            <h1>200</h1>\n            <p>It looks like you're seccess !</p>\n            <Link to=\"/\" className=\"goback-button\">\n              Go back\n            </Link>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\nexport default Complete;\n","export default __webpack_public_path__ + \"static/media/furniture_1.fdec94ed.jpg\";","export default __webpack_public_path__ + \"static/media/furniture_bed.8244dd60.jpg\";","export default __webpack_public_path__ + \"static/media/furniture_blanket.38714cf7.jpg\";","export default __webpack_public_path__ + \"static/media/furniture_chair.5e9ee628.jpg\";","export default __webpack_public_path__ + \"static/media/furniture_lamp.192a2dc7.jpg\";","export default __webpack_public_path__ + \"static/media/furniture_plant.c7380d24.jpg\";","export default __webpack_public_path__ + \"static/media/furniture_rug.e209de0e.jpg\";","export default __webpack_public_path__ + \"static/media/furniture_shelf.189775f5.jpg\";","export default __webpack_public_path__ + \"static/media/furniture_sofa.537bb04e.jpg\";","import { Furniture } from \"../@types/dashboard\";\nimport theme_1 from \"../assets/image/furniture_1.jpg\";\nimport furniture_bed from \"../assets/image/furniture_bed.jpg\";\nimport furniture_blanket from \"../assets/image/furniture_blanket.jpg\";\nimport furniture_chair from \"../assets/image/furniture_chair.jpg\";\nimport furniture_lamp from \"../assets/image/furniture_lamp.jpg\";\nimport furniture_plant from \"../assets/image/furniture_plant.jpg\";\nimport furniture_rug from \"../assets/image/furniture_rug.jpg\";\nimport furniture_shelf from \"../assets/image/furniture_shelf.jpg\";\nimport furniture_sofa from \"../assets/image/furniture_sofa.jpg\";\n\nexport const recommendation: Partial<Furniture> = {\n  price: 39900,\n  baseColor: \"white\",\n  subColor: \"grey\",\n  imageUrl: theme_1,\n  details:\n    \"ドライフラワーと照明が特徴的なワンルームの一人暮らしインテリア。テキトタイルはグレー系で揃えられ、IKEAの毛布やサイドテーブル、照明などで特徴立たせている、シンプルな雰囲気のお部屋。\",\n};\n\nexport const db: Array<Partial<Furniture>> = [\n  {\n    width: 97,\n    depth: 180,\n    height: 50,\n    price: 39900,\n    name: \"ベッド\",\n    imageUrl: furniture_bed,\n  },\n  {\n    width: 40,\n    depth: 40,\n    height: 60,\n    price: 4999,\n    name: \"テーブル\",\n    imageUrl: furniture_chair,\n  },\n  {\n    width: 95,\n    depth: 64,\n    height: 68,\n    price: 10990,\n    name: \"ソファ\",\n    imageUrl: furniture_sofa,\n  },\n  {\n    width: 132,\n    depth: 0,\n    height: 38,\n    price: 20280,\n    name: \"間接照明\",\n    imageUrl: furniture_lamp,\n  },\n  {\n    width: 130,\n    depth: 190,\n    height: 0,\n    price: 4620,\n    name: \"ラグ\",\n    imageUrl: furniture_rug,\n  },\n  {\n    width: 85,\n    depth: 55,\n    height: 0,\n    price: 4999,\n    name: \"毛布\",\n    imageUrl: furniture_blanket,\n  },\n  {\n    width: 70,\n    depth: 25,\n    height: 70,\n    price: 7000,\n    name: \"ラック\",\n    imageUrl: furniture_shelf,\n  },\n  {\n    width: 55,\n    depth: 60,\n    height: 150,\n    price: 15176,\n    name: \"観葉植物\",\n    imageUrl: furniture_plant,\n  },\n];\n","import { FC } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { db, recommendation } from \"../../utilities/dammyData\";\nimport { taxIncludedPrice } from \"../../utilities/convertValue\";\nimport Loading from \"../../components/Loading\";\nimport Image from \"../../components/Image\";\n\nconst DiagnoseResult: FC = () => {\n  return (\n    <div className=\"common-container\">\n      {db.length === 0 && recommendation && <Loading />}\n      <div className=\"diagnose-result\">\n        <div className=\"thumbnail\">\n          <img src={recommendation.imageUrl} alt=\"\" />\n        </div>\n        <div className=\"content\">\n          <h1 className=\"name\">シンプル風</h1>\n          <p className=\"text\">{recommendation.details}</p>\n          <div className=\"colors\">\n            <div className=\"item\">\n              <p className=\"text\">ベースカラー：{recommendation.baseColor}</p>\n              <span className=\"cercle -white\"></span>\n            </div>\n            <div className=\"item\">\n              <p className=\"text\">サブカラー：{recommendation.subColor}</p>\n              <span className=\"cercle -grey\"></span>\n            </div>\n          </div>\n          <div className=\"price\">\n            <p className=\"item\">\n              この組み合わせで\n              <span className=\"total\">{taxIncludedPrice(1200000)}円</span>\n            </p>\n          </div>\n        </div>\n      </div>\n      <div className=\"product-list\">\n        {db.map((furniture) => (\n          <Link to=\"/diagnose\" key={furniture.name} className=\"wrapper\">\n            <div className=\"thumbnail\">\n              {furniture.imageUrl && <Image src={furniture.imageUrl} />}\n            </div>\n            <div className=\"content\">\n              <h4 className=\"name\">{furniture.name}</h4>\n              {furniture.price && (\n                <p className=\"price\">{taxIncludedPrice(furniture.price)}</p>\n              )}\n              <div className=\"dimentions\">\n                <ul>\n                  <li>幅 {furniture.width}cm</li>\n                  <li>深さ {furniture.depth}cm</li>\n                  <li>高さ {furniture.height}cm</li>\n                </ul>\n              </div>\n            </div>\n          </Link>\n        ))}\n      </div>\n    </div>\n  );\n};\nexport default DiagnoseResult;\n","import { FC } from \"react\";\nimport Divider from \"../components/Divider\";\n\nconst terms: FC = () => {\n  return (\n    <>\n      <div className=\"terms\">\n        <div className=\"inner\">\n          <p className=\"title\">利用規約</p>\n          <p className=\"subtitle\">\n            Lorem ipsum dolor sit amet, consectetur adipisci elit, sed eiusmod\n            tempor incidunt ut labore et dolore magna aliqua.\n          </p>\n          <Divider />\n          <div className=\"box\">\n            <p className=\"article\">第1条項</p>\n            <p className=\"text\">\n              Lorem ipsum dolor sit amet, consectetur adipisci elit, sed eiusmod\n              tempor incidunt ut labore et dolore magna aliqua. Ut enim ad minim\n              veniam, quis nostrum exercitationem ullam corporis suscipit\n              laboriosam, nisi ut aliquid ex ea commodi consequatur. Quis aute\n              iure reprehenderit in voluptate velit esse cillum dolore eu fugiat\n              nulla pariatur. Excepteur sint obcaecat cupiditat non proident,\n              sunt in culpa qui officia deserunt mollit anim id est laborum.\n            </p>\n          </div>\n          <Divider />\n          <div className=\"box\">\n            <p className=\"article\">第2条項</p>\n            <p className=\"text\">\n              Lorem ipsum dolor sit amet. Et dolorem laboriosam est explicabo\n              excepturi est molestiae quam. Qui magni galisum in nesciunt animi\n              aut commodi galisum et nisi temporibus ad cumque quaerat est quia\n              quibusdam. Sed dolore sint est enim nesciunt sed repellendus\n              dolores! Ut ipsa soluta et ducimus tempora qui similique harum qui\n              eligendi repellat.\n            </p>\n          </div>\n          <Divider />\n          <div className=\"box\">\n            <p className=\"article\">第3条項</p>\n            <p className=\"text\">\n              Cum ullam sint et veniam internos rem quasi magnam. Non nemo odio\n              aut voluptatem quia rem unde optio. Et corrupti sapiente hic quia\n              molestias est numquam maxime. Et consectetur omnis eos quae sint\n              aut sunt impedit cum quidem dolores qui asperiores magni.\n            </p>\n          </div>\n          <Divider />\n          <div className=\"box\">\n            <p className=\"article\">第4条項</p>\n            <p className=\"text\">\n              Est saepe ipsum et aspernatur praesentium vel totam commodi quo\n              expedita vitae hic omnis assumenda est dolorem omnis. Cum atque\n              dolorem qui nisi consequuntur eum magni eveniet. Ex accusamus\n              animi sed rerum iste ad maxime quam ad natus voluptatum non\n              provident expedita non amet enim.\n            </p>\n          </div>\n          <Divider />\n          <div className=\"date\">【制定日2022年2月3日】</div>\n        </div>\n      </div>\n    </>\n  );\n};\nexport default terms;\n","import { FC } from \"react\";\nimport Divider from \"../components/Divider\";\n\nconst privacy: FC = () => {\n  return (\n    <>\n      <div className=\"terms\">\n        <div className=\"inner\">\n          <p className=\"title\">お客さまの個人情報のお取扱いについて</p>\n          <p className=\"subtitle\">\n            Lorem ipsum dolor sit amet, consectetur adipisci elit, sed eiusmod\n            tempor incidunt ut labore et dolore magna aliqua.\n          </p>\n          <Divider />\n          <div className=\"box\">\n            <p className=\"article\">第1条項</p>\n            <p className=\"text\">\n              Lorem ipsum dolor sit amet, consectetur adipisci elit, sed eiusmod\n              tempor incidunt ut labore et dolore magna aliqua. Ut enim ad minim\n              veniam, quis nostrum exercitationem ullam corporis suscipit\n              laboriosam, nisi ut aliquid ex ea commodi consequatur. Quis aute\n              iure reprehenderit in voluptate velit esse cillum dolore eu fugiat\n              nulla pariatur. Excepteur sint obcaecat cupiditat non proident,\n              sunt in culpa qui officia deserunt mollit anim id est laborum.\n            </p>\n          </div>\n          <Divider />\n          <div className=\"box\">\n            <p className=\"article\">第2条項</p>\n            <p className=\"text\">\n              Lorem ipsum dolor sit amet. Et dolorem laboriosam est explicabo\n              excepturi est molestiae quam. Qui magni galisum in nesciunt animi\n              aut commodi galisum et nisi temporibus ad cumque quaerat est quia\n              quibusdam. Sed dolore sint est enim nesciunt sed repellendus\n              dolores! Ut ipsa soluta et ducimus tempora qui similique harum qui\n              eligendi repellat.\n            </p>\n          </div>\n          <Divider />\n          <div className=\"box\">\n            <p className=\"article\">第3条項</p>\n            <p className=\"text\">\n              Cum ullam sint et veniam internos rem quasi magnam. Non nemo odio\n              aut voluptatem quia rem unde optio. Et corrupti sapiente hic quia\n              molestias est numquam maxime. Et consectetur omnis eos quae sint\n              aut sunt impedit cum quidem dolores qui asperiores magni.\n            </p>\n          </div>\n          <Divider />\n          <div className=\"box\">\n            <p className=\"article\">第4条項</p>\n            <p className=\"text\">\n              Est saepe ipsum et aspernatur praesentium vel totam commodi quo\n              expedita vitae hic omnis assumenda est dolorem omnis. Cum atque\n              dolorem qui nisi consequuntur eum magni eveniet. Ex accusamus\n              animi sed rerum iste ad maxime quam ad natus voluptatum non\n              provident expedita non amet enim.\n            </p>\n          </div>\n          <Divider />\n          <div className=\"date\">【制定日2022年2月3日】</div>\n        </div>\n      </div>\n    </>\n  );\n};\nexport default privacy;\n","import { FC } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nconst error: FC = () => {\n  return (\n    <>\n      <div className=\"error-container\">\n        <div className=\"error-block\">\n          <div className=\"main\">\n            <div className=\"bubble\"></div>\n            <div className=\"bubble\"></div>\n            <div className=\"bubble\"></div>\n            <div className=\"bubble\"></div>\n            <div className=\"bubble\"></div>\n            <div className=\"bubble\"></div>\n            <h1>404</h1>\n            <p>\n              It looks like you're lost... <br /> That's a trouble?\n            </p>\n            <Link to=\"/\" className=\"goback-button\">\n              Go back\n            </Link>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\nexport default error;\n","import { BrowserRouter, Route, Switch, Redirect } from \"react-router-dom\";\nimport { useAuthContext } from \"./hooks/useAuthContext\";\n\nimport Dashboard from \"./pages/dashboard/Dashboard\";\nimport CreateFurniture from \"./pages/create/CreateFurniture\";\nimport Login from \"./pages/login/Login\";\nimport Signup from \"./pages/signup/Signup\";\nimport Furniture from \"./pages/furniture/Furniture\";\nimport Navbar from \"./components/Navbar\";\nimport Sidebar from \"./components/Sidebar\";\nimport OnlineUsers from \"./components/OnlineUsers\";\nimport Diagnose from \"./pages/diagnose/Diagnose\";\nimport UserFavorite from \"./pages/user/UserFavorite\";\nimport UserAccount from \"./pages/user/UserAccount\";\nimport UserHistory from \"./pages/user/UserHistory\";\nimport Cart from \"./pages/cart/Cart\";\nimport Complete from \"./pages/cart/Complete\";\nimport DiagnoseResult from \"./pages/diagnose/DiagnoseResult\";\nimport Terms from \"./pages/terms\";\nimport Privacy from \"./pages/privacy\";\nimport Error from \"./pages/error\";\n\nconst App = () => {\n  const { user, authIsReady } = useAuthContext();\n  return (\n    <div className=\"App\">\n      {/* 一度もログインしたことのないユーザー */}\n      {!authIsReady && (\n        <BrowserRouter>\n          <div className=\"container -auth\">\n            <Switch>\n              <Route exact path=\"/\">\n                {!user && !authIsReady && <Redirect to=\"/login\" />}\n              </Route>\n              <Route path=\"/login\">\n                {user && <Redirect to=\"/login\" />}\n                {!user && <Login />}\n              </Route>\n              <Route path=\"/signup\">\n                {user && <Redirect to=\"/login\" />}\n                {!user && <Signup />}\n              </Route>\n            </Switch>\n          </div>\n        </BrowserRouter>\n      )}\n\n      {/* アクティブユーザーがログアウトした時 */}\n      {authIsReady && !user && (\n        <BrowserRouter>\n          <div className=\"container -auth\">\n            <Switch>\n              <Route exact path=\"/\">\n                {!user && <Redirect to=\"/login\" />}\n              </Route>\n              <Route path=\"/login\">\n                {user && <Redirect to=\"/login\" />}\n                {!user && <Login />}\n              </Route>\n              <Route path=\"/signup\">\n                {user && <Redirect to=\"/login\" />}\n                {!user && <Signup />}\n              </Route>\n            </Switch>\n          </div>\n        </BrowserRouter>\n      )}\n\n      {/* アクティブユーザー */}\n      {authIsReady && user && (\n        <BrowserRouter>\n          <Route path=\"/error\">\n            <Error />\n          </Route>\n          <Route path=\"/terms\">\n            <Terms />\n          </Route>\n          <Route path=\"/privacy\">\n            <Privacy />\n          </Route>\n          <Route path=\"/complete\">\n            <Complete />\n          </Route>\n          <Switch>\n            <Route exact path=\"/\">\n              {user && <Sidebar />}\n              <div className=\"container\">\n                <Navbar />\n                {!user && <Redirect to=\"/login\" />}\n                {user && <Dashboard />}\n              </div>\n              {user && <OnlineUsers />}\n            </Route>\n            <Route exact path=\"/diagnose\">\n              {user && <Sidebar />}\n              <div className=\"container\">\n                <Navbar />\n                {!user && <Redirect to=\"/login\" />}\n                {user && <Diagnose />}\n              </div>\n              {user && <OnlineUsers />}\n            </Route>\n            <Route path=\"/diagnose/result\">\n              {user && <Sidebar />}\n              <div className=\"container\">\n                <Navbar />\n                {!user && <Redirect to=\"/login\" />}\n                {user && <DiagnoseResult />}\n              </div>\n              {user && <OnlineUsers />}\n            </Route>\n            <Route path=\"/create/furniture\">\n              {user && <Sidebar />}\n              <div className=\"container\">\n                <Navbar />\n                {!user && <Redirect to=\"/login\" />}\n                {user && <CreateFurniture />}\n              </div>\n              {user && <OnlineUsers />}\n            </Route>\n            <Route path=\"/furnitures/:id\">\n              {user && <Sidebar />}\n              <div className=\"container\">\n                <Navbar />\n                {!user && <Redirect to=\"/login\" />}\n                {user && <Furniture />}\n              </div>\n              {user && <OnlineUsers />}\n            </Route>\n            <Route path=\"/login\">\n              {user && <Sidebar />}\n              <div className=\"container\">\n                <Navbar />\n                {user && <Redirect to=\"/\" />}\n                {!user && <Login />}\n              </div>\n              {user && <OnlineUsers />}\n            </Route>\n            <Route path=\"/signup\">\n              {user && <Sidebar />}\n              <div className=\"container\">\n                <Navbar />\n                {user && <Redirect to=\"/\" />}\n                {!user && <Signup />}\n              </div>\n              {user && <OnlineUsers />}\n            </Route>\n            <Route path=\"/users/:id/history\">\n              {user && <Sidebar />}\n              <div className=\"container\">\n                <Navbar />\n                {!user && <Redirect to=\"/login\" />}\n                {user && <UserHistory />}\n              </div>\n              {user && <OnlineUsers />}\n            </Route>\n            <Route path=\"/users/:id/account\">\n              {user && <Sidebar />}\n              <div className=\"container\">\n                <Navbar />\n                {!user && <Redirect to=\"/login\" />}\n                {user && <UserAccount />}\n              </div>\n              {user && <OnlineUsers />}\n            </Route>\n            <Route path=\"/users/:id/favorite\">\n              {user && <Sidebar />}\n              <div className=\"container\">\n                <Navbar />\n                {!user && <Redirect to=\"/login\" />}\n                {user && <UserFavorite />}\n              </div>\n              {user && <OnlineUsers />}\n            </Route>\n            <Route path=\"/users/:id/cart\">\n              {user && <Sidebar />}\n              <div className=\"container\">\n                <Navbar />\n                {!user && <Redirect to=\"/login\" />}\n                {user && <Cart />}\n              </div>\n              {user && <OnlineUsers />}\n            </Route>\n          </Switch>\n        </BrowserRouter>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n","import * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport \"./assets/sass/app.scss\";\nimport App from \"./App\";\nimport { AuthContextProvider } from \"./context/AuthContext\";\nimport { CookiesProvider } from \"react-cookie\";\n// for connecting user and authIsReady propaties from all components\n\nReactDOM.render(\n  <React.StrictMode>\n    <AuthContextProvider>\n      <CookiesProvider>\n        <App />\n      </CookiesProvider>\n    </AuthContextProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}